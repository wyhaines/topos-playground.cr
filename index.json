{"repository_name":"topos-playground.cr","body":"![Topos Playground CI](https://img.shields.io/github/actions/workflow/status/wyhaines/topos-playground.cr/ci.yml?branch=main&style=for-the-badge&logo=GitHub)\n[![GitHub release](https://img.shields.io/github/release/wyhaines/topos-playground.cr.svg?style=for-the-badge)](https://github.com/wyhaines/topos-playground.cr/releases)\n![GitHub commits since latest release (by SemVer)](https://img.shields.io/github/commits-since/wyhaines/topos-playground.cr/latest?style=for-the-badge)\n\n<div id=\"top\" />\n<br />\n<div align=\"center\">\n  <img src=\"https://raw.githubusercontent.com/topos-protocol/topos-playground/main/.github/assets/topos_logo_dark.png#gh-dark-mode-only\" alt=\"Logo\" width=\"200\">\n  <br />\n  <p align=\"center\">\n  <b>Topos Playground</b> is a CLI (command-line interface) to run a local Topos devnet üöÄ\n  </p>\n  <p>\n  This version in an unofficial version inspired by <a href=\"https://github.com/topos-protocol/topos-playground\">the official version of topos-playground</a>. This version should have feature-parity with the official version, and may have additional features. This version is also distributed as a standalone binary instead of a Node.js application.\n  </p>\n  <br />\n</div>\n\n## Getting Started\n\nThe Topos Playground is a CLI that allows you to easily run and manage a local Topos devnet. The components that it runs on your behalf depend on Docker, Docker Compose, and NodeJS to locally run multiple subnets, multiple TCE nodes, and a dApp with supporting infrastructure, capable of cross-subnet messaging. For official documentation about Topos and about the official Playground CLI, take a look at the [Topos Developer Portal](https://docs.topos.technology).\n\nThis document, along with API documentation of this implementation of the Topos Playground can also be accessed at [https://wyhaines.github.io/topos-playground.cr/](https://wyhaines.github.io/topos-playground.cr/).\n\n### Requirements\n\n- [Docker](https://docs.docker.com/get-docker/_) version 17.06.0 or greater\n- [Docker Compose](https://docs.docker.com/compose/install/) version 2.0.0 or greater\n- [NodeJS](https://nodejs.dev/en/) version 16.0.0 or greater\n- Git\n\n### Install / Run topos-playground\n\nPrecompiled, statically linked binaries are available for Linux and for MacOS from the [Releases](https://github.com/wyhaines/topos-playground.cr/releases) tab in this github repository. Download the appropriate binary for your platform, and uncompress it. You may want to rename it to just `topos-playground`, as all precompiled binaries reflect the architecture and platform that they were compiled for in their names, and you may want to move it into your $PATH:\n\n```\ngzip -d topos-playground-linux-x86_64.gz # or `unzip topos-playground-darwin.zip`\nmv topos-playground-linux-x86_64 topos-playground`\n\n```\n\n#### Install via Git\n\nIf you prefer to install the playground via Git, you can clone the repository and build it manually. This will require that you have [Crystal](https://crystal-lang.org/install/) installed.\n\n```\n$ git clone https://github.com/wyhaines/topos-playground.cr.git\n$ cd topos-playground.cr\n$ shards build --release\n```\n\nThe compiled `topos-playground` will be placed into `bin/topos-playground`.\n\n### Run the CLI\n\n\n```\n$ topos-playground --help\n```\n\nTopos Playground supports two subcommands, `start` and `clean`.\n\n```\n$ topos-playground start\n```\n\nThis will check that the required prerequisites are met, and will then setup and start all of the containers for a complete local Topos network. It will report progress to the console as well as logging to a file.\n\n```\n$ topos-playground clean\n```\n\nTo clean up any still-running docker containers or filesystem artifacts from a previous invocation of the topos-playground, use the `clean` command.\n\nThe playground respects XDG Base Directory Specifications, so by default, it will store data used while running in `$HOME/.local/share/topos-playground` and it will store logs in `$HOME/.state/topos-playground/logs`.\n\nTo override these default locations, you can set your `HOME`, `XDG_DATA_HOME` and `XDG_STATE_HOME` environment variables, or specify them in a `.env` file.\n\n```\n$ HOME=/tmp topos-playground start\n```\n\nBy default, topos-playground sends output to both your console and to a log file when it is running. To disable this, you can use the `--quiet` flag to prevent output from going to the console, or the `--no-log` flag to prevent output from going to the log file.\n\n```\n$ topos-playground clean --quiet\n```\n\nFor more in-depth discussion about the playground components, and what the `topos-playground` is doing, take a look at the [Topos Playground components](https://docs.topos.technology/content/module-2/3-components.html) portion of the Topos Developer Portal.\n\n### Development\n\nTo contribute to the development of this version of the playground, [fork](https://github.com/wyhaines/topos-playground.cr/fork) the repository.\n\nDo your work within a branch on your fork. When it is ready, create a Pull Request that clearly explains the reasoning behind your code changes, what they do, and anything that we should be aware of when testing your code.\n\ni.e.\n\n1. Fork it (<https://github.com/wyhaines/topos-playground/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n### Discussion\n\nFor Topos community help or discussion, you can join the Topos Discord server:\n\n[https://discord.gg/zMCqqCbGMV](https://discord.gg/zMCqqCbGMV)\n\n### Troubleshooting\n\n* `Running the redis server...‚ùó Error`\n\nThe container that provides the Redis service was unable to start. This is likely because you are already running a Redis instance on your system. Try shutting it down.\n\nOn Linux:\n\n```\n$ sudo systemctl stop redis-server\n```\n\nor\n\n\n```\n$ sudo service redis-server stop\n```\n\nOn MacOS:\n\n```\nbrew services stop redis\n```\n\nIf you manually installed and started Redis, you will need to manually stop it.\n\n```\n$ redis-cli shutdown\n```\n\n* `docker: Error response from daemon: Conflict. The container name \"/redis-stack-server\" is already in use by container \"1ccdeb3adf2259168a5f74697013eaab8d61fb18e123e0a4d06545ac4269cc94\". You have to remove (or rename) that container to be able to reuse that name.`\n\nThis error indicates that the `redis-stack-server` container is already running. This is likely because you have already ran the playground, but a `topos-playground clean` was never ran. To fix this, run `topos-playground clean` and then try again.\n\nThis may also sometimes occur if you have a local redis instance running. Refer to the instructions above for how to shut down a local redis instance.\n\n* `Error: service \"contracts-incal\" didn't complete successfully: exit 1`\n\nOne cause of this error is a previous failure when starting the playground that wasn't cleaned up by running `topos-playground clean`. To fix this, run `topos-playground clean` and then try again.\n\n* `Error: info: unknown shorthand flag: 'd' in -d`\n\nIf you see this error, you likely do not have Docker Compose installed. You need version 2 or greater. Refer to the [Docker Compose installation instructions](https://docs.docker.com/compose/install/) for your platform.\n\n* `Error: failed to create network local-erc20-messaging-infra-docker: Error response from daemon: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network`\n\nThe likely cause of this error is that you are running a VPN of some sort.\n\nThe quick fix for this is to shut down your VPN, and then try to run the playground again.\n\n* `Error: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?`\n\nIf this error occurs, it likely means that your `dockerd` daemon is not running. Please consult the documentation for your OS and Docker installation to determine how to correctly restart it for your platform.\n\n* `Error: Error response from daemon: driver failed programming external connectivity on endpoint infra-tce-boot-1 (145130455efa244316eb0570064adb584e2c99d18fa2cd8f58b2774f1144d2bb):  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 32807 -j DNAT --to-destination 172.21.0.9:9090 ! -i br-de97b637b33b: iptables v1.8.7 (nf_tables): unknown option \"--to-destination\"`\n\nIf this error occurs, you are running Linux, and you have recently done an OS upgrade, try rebooting your system. If the problem persists, first ensure that you can load the 'xt_nat' kernel module:\n\n```\n$ sudo modprobe xt_nat\n```\n\nIf that command fails, then this is likely the problem. You can try to load the module manually:\n\n```\n$ sudo insmod /lib/modules/$(uname -r)/kernel/net/netfilter/xt_nat.ko\n```\n\nAnd then try again.\n\nIf that command succeeds, but the problem persists, check your iptables version:\n\n```\n$ iptables --version\n```\n\nIt should show something like this:\n\n```\niptables v1.8.7 (nf_tables)\n```\n\nIf the `nf_tables` is absent, and you have already tried to reboot, investigate your `/usr/sbin/iptables` symlink. It should point to `/usr/sbin/xtables-nft-multi`. It should, either via a direct link, or perhaps through a chain of symlinks, point to `/usr/sbin/xtables-nft-multi`.\n\n## Contributors\n\n- [Kirk Haines](https://github.com/wyhaines) - creator and maintainer\n","program":{"html_id":"topos-playground.cr/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"topos-playground.cr","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"topos-playground.cr/OptionParser","path":"OptionParser.html","kind":"class","full_name":"OptionParser","name":"OptionParser","abstract":false,"superclass":{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/ext/option_parser.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/ext/option_parser.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"doc":"These modifications to OptionParser apply text wrapping so that the command-line help is\nnicely formatted regardless of terminal width, and so that the formatting is visually\nsimilar to the Javascript version.","summary":"<p>These modifications to OptionParser apply text wrapping so that the command-line help is nicely formatted regardless of terminal width, and so that the formatting is visually similar to the Javascript version.</p>","instance_methods":[{"html_id":"separator(message=\"\")-instance-method","name":"separator","doc":"Adds a separator, with an optional header message, that will be used to\nprint the help. The separator is placed between the flags registered (`#on`)\nbefore, and the flags registered after the call.\n\nThis way, you can group the different options in an easier to read way.","summary":"<p>Adds a separator, with an optional header message, that will be used to print the help.</p>","abstract":false,"args":[{"name":"message","default_value":"\"\"","external_name":"message","restriction":""}],"args_string":"(message = \"\")","args_html":"(message = <span class=\"s\">&quot;&quot;</span>)","location":{"filename":"src/ext/option_parser.cr","line_number":25,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/ext/option_parser.cr#L25"},"def":{"name":"separator","args":[{"name":"message","default_value":"\"\"","external_name":"message","restriction":""}],"visibility":"Public","body":"@flags << (ToposPlayground.break_text(message.to_s, ToposPlayground.terminal_width))"}},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Returns all the setup options, formatted in a help message.","summary":"<p>Returns all the setup options, formatted in a help message.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/ext/option_parser.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/ext/option_parser.cr#L5"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"if banner = @banner\n  io << (ToposPlayground.break_text(banner.to_s, ToposPlayground.terminal_width))\n  io << '\\n'\nend\n@flags.join(io, '\\n')\n"}}]},{"html_id":"topos-playground.cr/SemanticVersion","path":"SemanticVersion.html","kind":"struct","full_name":"SemanticVersion","name":"SemanticVersion","abstract":false,"superclass":{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"topos-playground.cr/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/ext/semantic_version.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/ext/semantic_version.cr#L1"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"topos-playground.cr/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"}],"doc":"Conforms to Semantic Versioning 2.0.0\n\nSee [https://semver.org/](https://semver.org/) for more information.","summary":"<p>Conforms to Semantic Versioning 2.0.0</p>","constructors":[{"html_id":"parse(str:String):self-class-method","name":"parse","doc":"The distributed version of SemanticVersion#parse is too strict with leading zeros,\ncausing it to fail on versions like Docker's `17.06.00`.\nThis patch loosens that up so that versions with leading zeros are accepted.","summary":"<p>The distributed version of SemanticVersion#parse is too strict with leading zeros, causing it to fail on versions like Docker's <code>17.06.00</code>.</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String) : self","args_html":"(str : String) : <span class=\"k\">self</span>","location":{"filename":"src/ext/semantic_version.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/ext/semantic_version.cr#L5"},"def":{"name":"parse","args":[{"name":"str","external_name":"str","restriction":"String"}],"return_type":"self","visibility":"Public","body":"if m = str.match(/^([0-9]\\d*)\\.([0-9]\\d*)\\.([0-9]\\d*)\n                      (?:-((?:[0-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:[0-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?\n                      (?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/x)\n  major = m[1].to_i\n  minor = m[2].to_i\n  patch = m[3].to_i\n  prerelease = m[4]?\n  build = m[5]?\n  new(major, minor, patch, prerelease, build)\nelse\n  raise(ArgumentError.new(\"Not a semantic version: #{str.inspect}\"))\nend"}}]},{"html_id":"topos-playground.cr/ToposPlayground","path":"ToposPlayground.html","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground","abstract":false,"superclass":{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground.cr","line_number":17,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L17"},{"filename":"src/topos-playground/break_text.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/break_text.cr#L1"},{"filename":"src/topos-playground/command.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L5"},{"filename":"src/topos-playground/command_registry.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command_registry.cr#L4"},{"filename":"src/topos-playground/console_format.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/console_format.cr#L4"},{"filename":"src/topos-playground/dispatch.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/dispatch.cr#L3"},{"filename":"src/topos-playground/env.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L3"},{"filename":"src/topos-playground/env/dapp-backend.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-backend.cr#L3"},{"filename":"src/topos-playground/env/dapp-frontend.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-frontend.cr#L3"},{"filename":"src/topos-playground/env/executor-service.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/executor-service.cr#L3"},{"filename":"src/topos-playground/env/secrets.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/secrets.cr#L3"},{"filename":"src/topos-playground/env_registry.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env_registry.cr#L3"},{"filename":"src/topos-playground/error_check.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_check.cr#L1"},{"filename":"src/topos-playground/error_log.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L1"},{"filename":"src/topos-playground/helptext.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/helptext.cr#L1"},{"filename":"src/topos-playground/initialize_directories.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/initialize_directories.cr#L3"},{"filename":"src/topos-playground/log.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/log.cr#L4"},{"filename":"src/topos-playground/option_parser.cr","line_number":8,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/option_parser.cr#L8"},{"filename":"src/topos-playground/registry.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L1"},{"filename":"src/topos-playground/version.cr","line_number":1,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/version.cr#L1"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"HelpText","name":"HelpText","value":"\"\\ntopos-playground is a CLI tool which handles all of the orchestration necessary to run local Topos devnets with subnets, a TCE network, and apps.\\n\\n\\nExample Usage\\n\\n  $ topos-playground start\\n    Start the Topos-Playground. This command will output the status of the playground creation to the terminal as it runs, and will log a more detailed status to a log file.\\n\\n  $ topos-playground start --verbose\\n    This will also start the topos playground, but the terminal output as well as the log file output will contain more information.\\n    This is useful for debugging if there are errors starting the playground.\\n\\n  $ topos-playground start -q\\n    This will start the topos playground quietly. Most output will be suppressed.\\n\\n  $ topos-playground clean\\n    This will clean the topos playground. It will shut down all containers, and remove all filesystem artifacts except for log files.\\n\\n  $ topos-playground version\\n    This will print the version of the topos playground.\\n\\n  $ topos-playground version -q')\\n    This will print only the numbers of the topos-playground version, with no other output.\\n\\nConfiguration\\n\\n  topos-playground follows the XDG Base Directory Specification, which means that data files for use during runs of the playground are stored in $XDG_DATA_HOME/topos-playground, which defaults to $HOME/.local/share/topos-playground and log files are stored in $XDG_STATE_HOME/topos-playground/logs, which defaults to $HOME/.local/state/topos-playground/logs.\\n\\n  These locations can be overridden by setting the environment variables HOME, XDG_DATA_HOME, and XDG_STATE_HOME.\""},{"id":"VERSION","name":"VERSION","value":"{{ (read_file(\"/home/runner/work/topos-playground.cr/topos-playground.cr/src/topos-playground/../../VERSION\")).chomp }}"}],"class_methods":[{"html_id":"bind_console_logging(log_config)-class-method","name":"bind_console_logging","abstract":false,"args":[{"name":"log_config","external_name":"log_config","restriction":""}],"args_string":"(log_config)","args_html":"(log_config)","location":{"filename":"src/topos-playground/log.cr","line_number":11,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/log.cr#L11"},"def":{"name":"bind_console_logging","args":[{"name":"log_config","external_name":"log_config","restriction":""}],"visibility":"Public","body":"log_config.bind(\"stdout\", :trace, Log::IOBackend.new(STDOUT, formatter: StdoutConsoleFormat, dispatcher: Log::DirectDispatcher))\nlog_config.bind(\"error\", :debug, Log::IOBackend.new(STDOUT, formatter: StderrConsoleFormat, dispatcher: Log::DirectDispatcher))\n"}},{"html_id":"break_line(lines,line,word,max_line_length,max_word_length,indentation)-class-method","name":"break_line","abstract":false,"args":[{"name":"lines","external_name":"lines","restriction":""},{"name":"line","external_name":"line","restriction":""},{"name":"word","external_name":"word","restriction":""},{"name":"max_line_length","external_name":"max_line_length","restriction":""},{"name":"max_word_length","external_name":"max_word_length","restriction":""},{"name":"indentation","external_name":"indentation","restriction":""}],"args_string":"(lines, line, word, max_line_length, max_word_length, indentation)","args_html":"(lines, line, word, max_line_length, max_word_length, indentation)","location":{"filename":"src/topos-playground/break_text.cr","line_number":84,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/break_text.cr#L84"},"def":{"name":"break_line","args":[{"name":"lines","external_name":"lines","restriction":""},{"name":"line","external_name":"line","restriction":""},{"name":"word","external_name":"word","restriction":""},{"name":"max_line_length","external_name":"max_line_length","restriction":""},{"name":"max_word_length","external_name":"max_word_length","restriction":""},{"name":"indentation","external_name":"indentation","restriction":""}],"visibility":"Public","body":"if (line.size + word.size) > max_line_length && word.size > max_word_length\n  first_character = word[0]\n  minsplit = [2, (word.size * 0.3).floor].max\n  maxsplit = [word.size - 3, (word.size * 0.7).ceil].min\n  middle = (max_line_length - line.size) - 1\n  if ((((first_character != first_character.upcase) && (first_character != first_character.downcase)) && word.size > max_word_length) && middle > minsplit) && middle < maxsplit\n    part = word[0...middle]\n    remaining = word[middle..]\n    lines << \"#{line}#{part}#{remaining.size > 0 ? \"-\" : \"\"}\\n\"\n    line = indentation + remaining\n    word = \"\"\n  else\n    lines << (line + '\\n')\n    line = indentation + word\n    word = \"\"\n  end\nelse\n  lines << (line + '\\n')\n  line = indentation + word\n  word = \"\"\nend\n{line, word}\n"}},{"html_id":"break_text(str:String,max_line_length:Int32=80):String-class-method","name":"break_text","doc":"This is a helper function for nicely formatting the text output from topos-playground.\nIt takes a string and breaks it into lines of a maximum length, inserting newlines\nwhere necessary. It also attempts to break lines at word boundaries, and to avoid\nbreaking lines in the middle of words. It does this by calculating the average word\nlength and standard deviation of word length, and using these to determine the maximum\nword length to allow before breaking.\n\nWords that are longer than the maximum word length (i.e. a word length that is larger\nthan typical, and which would thus cause the text appearance to be peculiar, with a\nlarge end-of-line gap) are broken at a point that is 30-70% of the way through the word,\nusing a hyphen. The algorithm also refuses to break a word that starts with a non-letter\ncharacter, to avoid breaking things like directory paths.\n\nFinally, the algorithm maintains the indetation at the start of a line, when a line is\nbroken into multiple lines. This maintains text formatting, such as when examples are\nbeing provided in an indented section.)\n\nameba:disable Metrics/CyclomaticComplexity","summary":"<p>This is a helper function for nicely formatting the text output from topos-playground.</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"max_line_length","default_value":"80","external_name":"max_line_length","restriction":"Int32"}],"args_string":"(str : String, max_line_length : Int32 = 80) : String","args_html":"(str : String, max_line_length : Int32 = <span class=\"n\">80</span>) : String","location":{"filename":"src/topos-playground/break_text.cr","line_number":20,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/break_text.cr#L20"},"def":{"name":"break_text","args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"max_line_length","default_value":"80","external_name":"max_line_length","restriction":"Int32"}],"return_type":"String","visibility":"Public","body":"if max_line_length <= 0\n  return str\nend\nmax_word_length = calculate_max_word_length(str, max_line_length)\nlines = [] of String\nline = \"\"\nword = \"\"\nindentation = \"\"\nhas_determined_indentation = false\nstr.chars.each_with_index do |char, i|\n  word = word + char\n  if char.whitespace? || (i == (str.size - 1))\n    if (char != '\\n') && (!has_determined_indentation)\n      indentation = indentation + char\n    end\n    if (line.size + word.size) < max_line_length\n      line = line + word\n      word = \"\"\n    else\n      while (line.size + word.size) >= max_line_length\n        line, word = break_line(lines, line, word, max_line_length, max_word_length, indentation)\n      end\n    end\n    if char == '\\n'\n      lines << line\n      line = \"\"\n      indentation = \"\"\n      has_determined_indentation = false\n    else\n      if line.size >= max_line_length || (i == (str.size - 1))\n        lines << line\n        line = \"\"\n      end\n    end\n  else\n    has_determined_indentation = true\n  end\n  lines.join\nend\nwhile (line.size + word.size) >= max_line_length\n  line, word = break_line(lines, line, word, max_line_length, max_word_length, indentation)\nend\nif line.empty?\nelse\n  lines << line\nend\nlines.join\n"}},{"html_id":"calculate_max_word_length(str,max_line_length)-class-method","name":"calculate_max_word_length","abstract":false,"args":[{"name":"str","external_name":"str","restriction":""},{"name":"max_line_length","external_name":"max_line_length","restriction":""}],"args_string":"(str, max_line_length)","args_html":"(str, max_line_length)","location":{"filename":"src/topos-playground/break_text.cr","line_number":68,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/break_text.cr#L68"},"def":{"name":"calculate_max_word_length","args":[{"name":"str","external_name":"str","restriction":""},{"name":"max_line_length","external_name":"max_line_length","restriction":""}],"visibility":"Public","body":"words = str.split(' ')\nword_lengths = words.map(&.size)\naverage = word_lengths.sum.to_f / word_lengths.size\nsum_of_squared_differences = word_lengths.reduce(0.0) do |sum, length|\n  sum + ((length - average) ** 2)\nend\nstandard_deviation = Math.sqrt(sum_of_squared_differences / word_lengths.size)\n[max_line_length, average + standard_deviation].min\n"}},{"html_id":"command-class-method","name":"command","abstract":false,"location":{"filename":"src/topos-playground/dispatch.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/dispatch.cr#L4"},"def":{"name":"command","visibility":"Public","body":"CommandRegistry[config.command?]?"}},{"html_id":"config-class-method","name":"config","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":25,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L25"},"def":{"name":"config","visibility":"Public","body":"@@config"}},{"html_id":"determine_terminal_width-class-method","name":"determine_terminal_width","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":37,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L37"},"def":{"name":"determine_terminal_width","visibility":"Public","body":"Term::Screen.size[1]"}},{"html_id":"terminal_width-class-method","name":"terminal_width","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":29,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L29"},"def":{"name":"terminal_width","visibility":"Public","body":"@@terminal_width > -1 ? @@terminal_width : (@@terminal_width = determine_terminal_width)"}},{"html_id":"terminal_width=(value:Int32)-class-method","name":"terminal_width=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"::Int32"}],"args_string":"(value : Int32)","args_html":"(value : Int32)","location":{"filename":"src/topos-playground.cr","line_number":33,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L33"},"def":{"name":"terminal_width=","args":[{"name":"value","external_name":"value","restriction":"::Int32"}],"visibility":"Public","body":"@@terminal_width = value"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":41,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L41"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"config:Config-instance-method","name":"config","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":20,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L20"},"def":{"name":"config","return_type":"Config","visibility":"Public","body":"@config"}},{"html_id":"config=(config:Config)-instance-method","name":"config=","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","args_html":"(config : Config)","location":{"filename":"src/topos-playground.cr","line_number":20,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L20"},"def":{"name":"config=","args":[{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":"@config = config"}},{"html_id":"dispatch-instance-method","name":"dispatch","abstract":false,"location":{"filename":"src/topos-playground/dispatch.cr","line_number":8,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/dispatch.cr#L8"},"def":{"name":"dispatch","visibility":"Public","body":"if config.command?\n  ToposPlayground.command.try do |__arg0|\n    (__arg0.new(config)).run\n  end\nend"}},{"html_id":"error_check-instance-method","name":"error_check","abstract":false,"location":{"filename":"src/topos-playground/error_check.cr","line_number":2,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_check.cr#L2"},"def":{"name":"error_check","visibility":"Public","body":"check_for_conflicting_verbose_and_quiet\nverify_working_directory_existence\nverify_execution_path_existence\n"}},{"html_id":"get_log_file-instance-method","name":"get_log_file","abstract":false,"location":{"filename":"src/topos-playground/log.cr","line_number":7,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/log.cr#L7"},"def":{"name":"get_log_file","visibility":"Public","body":"(@@log_file || (@@log_file = File.new(config.log_file_path.as(String), \"a+\"))).as(File)"}},{"html_id":"initialize_directories-instance-method","name":"initialize_directories","abstract":false,"location":{"filename":"src/topos-playground/initialize_directories.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/initialize_directories.cr#L4"},"def":{"name":"initialize_directories","visibility":"Public","body":"config.home = ENV[\"HOME\"]? || \".\"\nconfig.cache_home = ENV[\"XDG_CACHE_HOME\"]? || (File.join(config.home.as(String), \".cache\"))\nconfig.data_home = ENV[\"XDG_DATA_HOME\"]? || (File.join(config.home.as(String), \".local\", \"share\"))\nconfig.state_home = ENV[\"XDG_STATE_HOME\"]? || (File.join(config.home.as(String), \".local\", \"state\"))\nconfig.working_dir = File.join(config.data_home.as(String), \"topos-playground\")\nconfig.log_dir = File.join(config.state_home.as(String), \"topos-playground\", \"logs\")\nconfig.log_file_path = File.join(config.log_dir.as(String), \"log-#{CSUUID.new}.log\")\nconfig.execution_path = File.join(config.working_dir.as(String), \"local-erc20-messaging-infra\")\nconfig.cache_dir = File.join(config.cache_home.as(String), \"topos-playground\")\nbegin\n  Dir.mkdir_p(config.working_dir.as(String))\nrescue\n  mkdir_error(config.working_dir)\nend\nbegin\n  Dir.mkdir_p(config.log_dir.as(String))\nrescue\n  mkdir_error(config.log_dir)\nend\n"}},{"html_id":"parse_command_line-instance-method","name":"parse_command_line","abstract":false,"location":{"filename":"src/topos-playground/option_parser.cr","line_number":9,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/option_parser.cr#L9"},"def":{"name":"parse_command_line","visibility":"Public","body":"parser = setup_options_parser\nparser.parse\nunless_defined?(Spec) do\n  if config.command?\n  else\n    puts(parser)\n    exit\n  end\nend\n@@config = @config\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/topos-playground.cr","line_number":49,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L49"},"def":{"name":"run","visibility":"Public","body":"dispatch"}},{"html_id":"setup_all_logging-instance-method","name":"setup_all_logging","abstract":false,"location":{"filename":"src/topos-playground/log.cr","line_number":32,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/log.cr#L32"},"def":{"name":"setup_all_logging","visibility":"Public","body":"if ToposPlayground.config.quiet?\n  Log.setup do |_|\n  end\nend\nif ToposPlayground.command.try(&.log_to_file?(config))\n  Log.builder.bind(\"stdout\", :trace, Log::IOBackend.new(get_log_file, dispatcher: Log::DirectDispatcher))\n  Log.builder.bind(\"error\", :debug, Log::IOBackend.new(get_log_file, dispatcher: Log::DirectDispatcher))\nend\n"}},{"html_id":"setup_console_logging-instance-method","name":"setup_console_logging","abstract":false,"location":{"filename":"src/topos-playground/log.cr","line_number":28,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/log.cr#L28"},"def":{"name":"setup_console_logging","visibility":"Public","body":"Log.setup do |c|\n  ToposPlayground.bind_console_logging(c)\nend"}}],"types":[{"html_id":"topos-playground.cr/ToposPlayground/Command","path":"ToposPlayground/Command.html","kind":"class","full_name":"ToposPlayground::Command","name":"Command","abstract":true,"superclass":{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command.cr","line_number":11,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L11"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"topos-playground.cr/ToposPlayground/Command/Clean","kind":"class","full_name":"ToposPlayground::Command::Clean","name":"Clean"},{"html_id":"topos-playground.cr/ToposPlayground/Command/Logs","kind":"class","full_name":"ToposPlayground::Command::Logs","name":"Logs"},{"html_id":"topos-playground.cr/ToposPlayground/Command/Start","kind":"class","full_name":"ToposPlayground::Command::Start","name":"Start"},{"html_id":"topos-playground.cr/ToposPlayground/Command/Version","kind":"class","full_name":"ToposPlayground::Command::Version","name":"Version"}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"doc":"All commands inherit from this class. It provides the expected logging constant\ninterfaces, handles registration with the command registry, and access to the\ntopos-playground configuration. It also provides a couple convenience `#run_process`\nmethods for running processes and capturing their output either synchronously or\nasynchronously.","summary":"<p>All commands inherit from this class.</p>","class_methods":[{"html_id":"config:Config-class-method","name":"config","abstract":false,"location":{"filename":"src/topos-playground/command.cr","line_number":22,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L22"},"def":{"name":"config","return_type":"Config","visibility":"Public","body":"@@config"}},{"html_id":"config=(config:Config)-class-method","name":"config=","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","args_html":"(config : Config)","location":{"filename":"src/topos-playground/command.cr","line_number":22,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L22"},"def":{"name":"config=","args":[{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":"@@config = config"}},{"html_id":"levenshtein_options-class-method","name":"levenshtein_options","doc":"If no command matches, the playground will attempt to find a command that might have\nbeen the intended command. Each `Command` subclass can subclass this class method in\norder to return a list of possible commands to use in the levenshtein matching process.","summary":"<p>If no command matches, the playground will attempt to find a command that might have been the intended command.</p>","abstract":false,"location":{"filename":"src/topos-playground/command.cr","line_number":32,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L32"},"def":{"name":"levenshtein_options","visibility":"Public","body":"Hash(String, Hash(String, Array(String))).new"}},{"html_id":"log_to_file?(config)-class-method","name":"log_to_file?","doc":"For some commands, writing a physical log of execution isn't necessary. This class\nmethod will be called on the command before the playground sets up the physical log,\nand if it returns `false`, the physical log will not be created. Subclasses that\nshould log to a physical file should override this method to return `true`.","summary":"<p>For some commands, writing a physical log of execution isn't necessary.</p>","abstract":false,"args":[{"name":"config","external_name":"config","restriction":""}],"args_string":"(config)","args_html":"(config)","location":{"filename":"src/topos-playground/command.cr","line_number":40,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L40"},"def":{"name":"log_to_file?","args":[{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"false"}},{"html_id":"options(parser,config)-class-method","name":"options","doc":"This class method is called when the playground is setting up its command line parser.\nAny subclass can implement this method to add its own command line flags.","summary":"<p>This class method is called when the playground is setting up its command line parser.</p>","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command.cr","line_number":26,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L26"},"def":{"name":"options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":""}},{"html_id":"run_process(command,chdir=\".\",background:Bool=false,env:Process::Env=nil)-class-method","name":"run_process","doc":"Convenience method for running a process and capturing its output. This method\nruns the process asynchronously, spawning two threads. One monitors an instance of\n`Channel(Bool)` and kills the process when it receives a message. This allows the\nprocess to be gracefully terminated when the user presses `Ctrl-C`.\n\nThe other thread monitors the output of the process, and passes it through the\n`monitor_channel` if verbose logging has been requested via the command line flags.\n\nThe method returns a tuple containing the `kill_channel`, `monitor_channel`, and\n`process` objects.","summary":"<p>Convenience method for running a process and capturing its output.</p>","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"background","default_value":"false","external_name":"background","restriction":"Bool"},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"}],"args_string":"(command, chdir = \".\", background : Bool = false, env : Process::Env = nil)","args_html":"(command, chdir = <span class=\"s\">&quot;.&quot;</span>, background : Bool = <span class=\"n\">false</span>, env : Process::Env = <span class=\"n\">nil</span>)","location":{"filename":"src/topos-playground/command.cr","line_number":63,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L63"},"def":{"name":"run_process","args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"background","default_value":"false","external_name":"background","restriction":"Bool"},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"}],"visibility":"Public","body":"kill_channel = Channel(Bool).new\nmonitor_channel = Channel(String).new(100)\noutput = IO::Stapled.new(*IO.pipe)\nprocess = Process.new(command, shell: true, chdir: chdir.to_s, output: output, error: output, env: env)\nspawn(name: \"kill-monitor #{command}\") do\n  kill_channel.receive\n  if config.verbose?\n    (Log.for(\"stdout\")).warn do\n      \"Terminating #{command}\"\n    end\n  end\n  process.terminate\nend\nspawn(name: \"output-monitor #{command}\") do\n  while line = output.gets\n    if config.verbose?\n      monitor_channel.send(line)\n    end\n    if process.terminated?\n      break\n    end\n  end\nend\n{kill_channel, monitor_channel, process}\n"}},{"html_id":"run_process(command,chdir=\".\",env:Process::Env=nil,shell:Bool=true)-class-method","name":"run_process","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"},{"name":"shell","default_value":"true","external_name":"shell","restriction":"Bool"}],"args_string":"(command, chdir = \".\", env : Process::Env = nil, shell : Bool = true)","args_html":"(command, chdir = <span class=\"s\">&quot;.&quot;</span>, env : Process::Env = <span class=\"n\">nil</span>, shell : Bool = <span class=\"n\">true</span>)","location":{"filename":"src/topos-playground/command.cr","line_number":94,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L94"},"def":{"name":"run_process","args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"},{"name":"shell","default_value":"true","external_name":"shell","restriction":"Bool"}],"visibility":"Public","body":"output = IO::Memory.new\nstatus = Process.run(command, shell: shell, output: output, error: output, env: env, chdir: chdir.to_s)\n{status, output}\n"}}],"constructors":[{"html_id":"new(config:Config)-class-method","name":"new","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"::Config"}],"args_string":"(config : Config)","args_html":"(config : Config)","location":{"filename":"src/topos-playground/command.cr","line_number":44,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L44"},"def":{"name":"new","args":[{"name":"config","external_name":"config","restriction":"::Config"}],"visibility":"Public","body":"_ = allocate\n_.initialize(config)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"config:Config-instance-method","name":"config","abstract":false,"location":{"filename":"src/topos-playground/command.cr","line_number":21,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L21"},"def":{"name":"config","return_type":"Config","visibility":"Public","body":"@config"}},{"html_id":"config=(config:Config)-instance-method","name":"config=","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","args_html":"(config : Config)","location":{"filename":"src/topos-playground/command.cr","line_number":21,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L21"},"def":{"name":"config=","args":[{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":"@config = config"}},{"html_id":"run-instance-method","name":"run","doc":"All subclasses must implement `#run`, which is responsible for carrying out the\nlogic of the command.","summary":"<p>All subclasses must implement <code><a href=\"../ToposPlayground/Command.html#run-instance-method\">#run</a></code>, which is responsible for carrying out the logic of the command.</p>","abstract":true,"location":{"filename":"src/topos-playground/command.cr","line_number":51,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L51"},"def":{"name":"run","visibility":"Public","body":""}},{"html_id":"run_process(command,chdir=\".\",env:Process::Env=nil,shell:Bool=true)-instance-method","name":"run_process","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"},{"name":"shell","default_value":"true","external_name":"shell","restriction":"Bool"}],"args_string":"(command, chdir = \".\", env : Process::Env = nil, shell : Bool = true)","args_html":"(command, chdir = <span class=\"s\">&quot;.&quot;</span>, env : Process::Env = <span class=\"n\">nil</span>, shell : Bool = <span class=\"n\">true</span>)","location":{"filename":"src/topos-playground/command.cr","line_number":107,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L107"},"def":{"name":"run_process","args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"},{"name":"shell","default_value":"true","external_name":"shell","restriction":"Bool"}],"visibility":"Public","body":"self.class.run_process(command, chdir, env)"}},{"html_id":"run_process(command,chdir=\".\",background:Bool=false,env:Process::Env=nil)-instance-method","name":"run_process","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"background","default_value":"false","external_name":"background","restriction":"Bool"},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"}],"args_string":"(command, chdir = \".\", background : Bool = false, env : Process::Env = nil)","args_html":"(command, chdir = <span class=\"s\">&quot;.&quot;</span>, background : Bool = <span class=\"n\">false</span>, env : Process::Env = <span class=\"n\">nil</span>)","location":{"filename":"src/topos-playground/command.cr","line_number":111,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L111"},"def":{"name":"run_process","args":[{"name":"command","external_name":"command","restriction":""},{"name":"chdir","default_value":"\".\"","external_name":"chdir","restriction":""},{"name":"background","default_value":"false","external_name":"background","restriction":"Bool"},{"name":"env","default_value":"nil","external_name":"env","restriction":"Process::Env"}],"visibility":"Public","body":"self.class.run_process(command, chdir, background, env)"}}],"types":[{"html_id":"topos-playground.cr/ToposPlayground/Command/Clean","path":"ToposPlayground/Command/Clean.html","kind":"class","full_name":"ToposPlayground::Command::Clean","name":"Clean","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command/clean.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L3"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"class_methods":[{"html_id":"levenshtein_options-class-method","name":"levenshtein_options","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":13,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L13"},"def":{"name":"levenshtein_options","visibility":"Public","body":"{\"clean\" => {\"--no-delete\" => [] of String}}"}},{"html_id":"log_to_file?(config)-class-method","name":"log_to_file?","abstract":false,"args":[{"name":"config","external_name":"config","restriction":""}],"args_string":"(config)","args_html":"(config)","location":{"filename":"src/topos-playground/command/clean.cr","line_number":19,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L19"},"def":{"name":"log_to_file?","args":[{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"true"}},{"html_id":"options(parser,config)-class-method","name":"options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/clean.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L4"},"def":{"name":"options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"clean\", \"Shut down Playground docker containers, and clean up the working directory\") do\n  config.command = \"clean\"\n  parser.on(\"--no-delete\", \"Do not delete the working directory\") do\n    config.do_not_delete_working_dir = true\n  end\nend"}}],"instance_methods":[{"html_id":"completion_banner-instance-method","name":"completion_banner","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":150,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L150"},"def":{"name":"completion_banner","visibility":"Public","body":"banner = \"\\nüî• The Topos Playground is down üî•\\n\\n‚ùóImportant‚ùó\\nBefore starting the Topos Playground again, you must reset your MetaMask Account Data for each subnet (both Topos and Incal) in order to reset the nonce count. Refer to \\\"https://support.metamask.io/hc/en-us/articles/360015488891-How-to-clear-your-account-activity-reset-account\\\" for more information.\\n\"\n(Log.for(\"stdout\")).info do\n  banner\nend\n"}},{"html_id":"remove_working_directory-instance-method","name":"remove_working_directory","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":129,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L129"},"def":{"name":"remove_working_directory","visibility":"Public","body":"begin\n  if config.working_dir_exists?\n    (Log.for(\"stdout\")).info do\n      \"Cleaning up the working directory (#{config.working_dir})...\"\n    end\n    if config.do_not_delete_working_dir?\n      (Log.for(\"stdout\")).info do\n        \"‚úÖ Per command-line flag, working directory has not been removed\"\n      end\n    else\n      status, output = run_process(\"rm -rf #{config.working_dir}\")\n      if status.success?\n        (Log.for(\"stdout\")).info do\n          \"‚úÖ Working directory has been removed\"\n        end\n      else\n        Error.error do\n          \"Failed to clean up the working directory (#{config.working_dir}): #{output}\"\n        end\n      end\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Working directory (#{config.working_dir}) does not exist\"\n    end\n  end\nrescue ex\n  Error.error do\n    \"XFailed to clean up the working directory (#{config.working_dir}): #{ex}\"\n  end\n  exit(1)\nend"}},{"html_id":"run-instance-method","name":"run","doc":"All subclasses must implement `#run`, which is responsible for carrying out the\nlogic of the command.","summary":"<p>All subclasses must implement <code><a href=\"../../ToposPlayground/Command/Clean.html#run-instance-method\">#run</a></code>, which is responsible for carrying out the logic of the command.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":23,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L23"},"def":{"name":"run","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"Cleaning up Topos-Playground...\\n\"\nend\nverify_working_directory\nverify_execution_path\nshutdown_erc20_messagine_protocol_infra\nshutdown_redis\nremove_working_directory\ncompletion_banner\n"}},{"html_id":"shutdown_erc20_messagine_protocol_infra-instance-method","name":"shutdown_erc20_messagine_protocol_infra","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":78,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L78"},"def":{"name":"shutdown_erc20_messagine_protocol_infra","visibility":"Public","body":"if config.execution_path_exists\n  (Log.for(\"stdout\")).info do\n    \"Shutting down ERC20 messaging protocol infrastructure...\"\n  end\n  shutdown_docker_compose\nelse\n  (Log.for(\"stdout\")).info do\n    \"‚úÖ ERC20 messaging infra is not running; subnets & TCE are down\\n\"\n  end\nend"}},{"html_id":"shutdown_redis-instance-method","name":"shutdown_redis","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":103,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L103"},"def":{"name":"shutdown_redis","visibility":"Public","body":"begin\n  redis_container_name = \"redis-stack-server\"\n  status, output = run_process(\"docker ps --format '{{.Names}}'\")\n  if status.success?\n    if output.to_s.includes?(redis_container_name)\n      (Log.for(\"stdout\")).info do\n        \"Shutting down the redis container...\"\n      end\n      command = \"docker rm -f #{redis_container_name}\"\n      status, output = run_process(command)\n      if status.success?\n        (Log.for(\"stdout\")).info do\n          \"‚úÖ redis is down\\n\"\n        end\n      else\n        Error.error do\n          \"Failed to shut down redis: #{output}\\n\"\n        end\n      end\n    else\n      (Log.for(\"stdout\")).info do\n        \"‚úÖ redis is not running\\n\"\n      end\n    end\n  else\n    Error.error do\n      \"Failed to identify the redis container: #{output}\"\n    end\n  end\nrescue ex\n  puts(ex)\n  Error.error do\n    \"Failed to identify the redis container: #{ex}\"\n  end\n  exit(1)\nend"}},{"html_id":"verify_execution_path-instance-method","name":"verify_execution_path","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":56,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L56"},"def":{"name":"verify_execution_path","visibility":"Public","body":"if ((File.exists?(\"#{config.execution_path}\")) && (File.directory?(\"#{config.execution_path}\"))) && (File.readable?(\"#{config.execution_path}\"))\n  if Dir[\"#{config.execution_path}/*\"].empty?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Execution path (#{config.execution_path}) is empty\\n\"\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Found execution path (#{config.execution_path})\\n\"\n    end\n  end\n  config.execution_path_exists = true\nelse\n  if !(File.exists?(\"#{config.execution_path}\"))\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Execution path (#{config.execution_path}) does not exist. Can not shut down any running containers.\\n\"\n    end\n  else\n    if !(File.directory?(\"#{config.execution_path}\"))\n      Error.error do\n        \"Execution path (#{config.execution_path}) is not a directory. Can not continue!\"\n      end\n      exit(1)\n    else\n      Error.error do\n        \"Execution path (#{config.execution_path}) is not writable. Please check permissions.\"\n      end\n      exit(1)\n    end\n  end\n  config.execution_path_exists = false\nend"}},{"html_id":"verify_working_directory-instance-method","name":"verify_working_directory","abstract":false,"location":{"filename":"src/topos-playground/command/clean.cr","line_number":34,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/clean.cr#L34"},"def":{"name":"verify_working_directory","visibility":"Public","body":"if ((File.exists?(\"#{config.working_dir}\")) && (File.directory?(\"#{config.working_dir}\"))) && (File.writable?(\"#{config.working_dir}\"))\n  if Dir[\"#{config.working_dir}/*\"].empty?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Working directory (#{config.working_dir}) is empty\"\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Found working directory (#{config.working_dir})\"\n    end\n  end\n  config.working_dir_exists = true\nelse\n  if !(File.exists?(\"#{config.working_dir}\"))\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Working directory (#{config.working_dir}) does not exist. Perhaps it was already cleaned?\"\n    end\n  else\n    if !(File.directory?(\"#{config.working_dir}\"))\n      Error.error do\n        \"Working directory (#{config.working_dir}) is not a directory. Can not continue!\"\n      end\n      exit(1)\n    else\n      Error.error do\n        \"Working directory (#{config.working_dir}) is not writable. Please check permissions.\"\n      end\n      exit(1)\n    end\n  end\n  config.working_dir_exists = false\nend"}}]},{"html_id":"topos-playground.cr/ToposPlayground/Command/Error","path":"ToposPlayground/Command/Error.html","kind":"alias","full_name":"ToposPlayground::Command::Error","name":"Error","abstract":false,"locations":[{"filename":"src/topos-playground/command.cr","line_number":13,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L13"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":true,"aliased":"ToposPlayground::ErrorLog","aliased_html":"<a href=\"../../ToposPlayground/ErrorLog.html\">ToposPlayground::ErrorLog</a>","const":false,"constants":[{"id":"ErrSentinel","name":"ErrSentinel","value":"\"\""}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"}},{"html_id":"topos-playground.cr/ToposPlayground/Command/Log","path":"ToposPlayground/Command/Log.html","kind":"alias","full_name":"ToposPlayground::Command::Log","name":"Log","abstract":false,"locations":[{"filename":"src/topos-playground/command.cr","line_number":12,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command.cr#L12"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":true,"aliased":"Log","aliased_html":"Log","const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"}},{"html_id":"topos-playground.cr/ToposPlayground/Command/Logs","path":"ToposPlayground/Command/Logs.html","kind":"class","full_name":"ToposPlayground::Command::Logs","name":"Logs","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command/log.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"UUID_REGEXP","name":"UUID_REGEXP","value":"/([0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12})/"}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"class_methods":[{"html_id":"levenshtein_options-class-method","name":"levenshtein_options","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":18,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L18"},"def":{"name":"levenshtein_options","visibility":"Public","body":"{\"log\" => {\"list\" => [] of String, \"view\" => [\"-i\", \"--index\", \"-b\", \"--before\", \"-a\", \"--after\"], \"prune\" => [\"--dry-run\", \"-d\", \"--days\", \"-s\", \"--size\", \"-r\", \"--range\", \"-a\", \"--all\"]}}"}},{"html_id":"list_options(parser,config)-class-method","name":"list_options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/log.cr","line_number":38,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L38"},"def":{"name":"list_options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"list\", \"Show all of the log files that currently exist in the log directory\") do\n  config.subcommand = \"list\"\nend"}},{"html_id":"log_to_file?(config)-class-method","name":"log_to_file?","abstract":false,"args":[{"name":"config","external_name":"config","restriction":""}],"args_string":"(config)","args_html":"(config)","location":{"filename":"src/topos-playground/command/log.cr","line_number":110,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L110"},"def":{"name":"log_to_file?","args":[{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"config.subcommand? == \"prune\""}},{"html_id":"options(parser,config)-class-method","name":"options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/log.cr","line_number":7,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L7"},"def":{"name":"options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"log\", \"List, View, and Prune topos-playground logs\") do\n  config.command = \"logs\"\n  parser.separator(\"\\nLog commands:\")\n  list_options(parser, config)\n  view_options(parser, config)\n  prune_options(parser, config)\nend"}},{"html_id":"prune_options(parser,config)-class-method","name":"prune_options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/log.cr","line_number":62,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L62"},"def":{"name":"prune_options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"prune\", \"Prune log files from the log directory\") do\n  config.subcommand = \"prune\"\n  parser.separator(\"\\nLog Prune options:\")\n  parser.on(\"--dry-run\", \"Do not actually delete any files. Just show what would be deleted.\") do\n    config.dry_run = true\n  end\n  parser.on(\"-d [DAYS]\", \"--days [DAYS]\", \"Prune log files older than DAYS days. Defaults to 7 days.\") do |days|\n    if days.empty?\n      days = 7\n    end\n    config.parameter = \"days:#{days}\"\n  end\n  parser.on(\"-s [SIZE]\", \"--size [SIZE]\", \"Prune log files smaller than SIZE bytes. Defaults to 1024 bytes.\\nNumbers can be suffixed to indicate units.\\n    2048\\n    2048b   2048 bytes\\n    10k\\n    10kb    10 kilobytes\\n    1m\\n    1mb     1 megabyte\\n    4g\\n    4gb     4 gigabytes\") do |size|\n    if size.empty?\n      size = 1024\n    end\n    config.parameter = \"size:#{size}\"\n  end\n  parser.on(\"-r [RANGE]\", \"--range [RANGE]\", \"Prune log files within a given range. Files are numbered in the same manner as with the `list` command or the `view --index` command, with the most recent log file being at position 1.\\nRange syntax is as follows:\\n    10..15  files 10 through 15\\n    ..5     the 5 most recent files; i.e. files 1 to 5\\n    6..     all files, starting with the 6th most recent file\\n    ..      this would be the same as the `--all` flag\\n\\nSpecific files can also be specified by number, either alone, or in a comma separated list.\\n    39      the 39th most recent file\\n    3,5,7   the 3rd, 5th, and 7th most recent files\") do |range|\n    if range.empty?\n    else\n      config.parameter = \"range:#{range}\"\n    end\n  end\n  parser.on(\"-a\", \"--all\", \"Prune all log files.\") do\n    config.parameter = \"all:\"\n  end\nend"}},{"html_id":"view_options(parser,config)-class-method","name":"view_options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/log.cr","line_number":44,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L44"},"def":{"name":"view_options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"view\", \"View a topos-playground log file. With no other flags, this defaults to the most recent log file.\") do\n  config.subcommand = \"view\"\n  parser.separator(\"\\nLog View options:\")\n  parser.on(\"-i [POSITION]\", \"--index [POSITION]\", \"View the log file at position POSITION, starting with the most recent log file and counting backwards. Defaults to 1, which means the most recent log file.\") do |position|\n    if position.empty?\n      position = 1\n    end\n    config.parameter = \"index:#{position}\"\n  end\n  parser.on(\"-b [DATE/TIME]\", \"--before [DATE/TIME]\", \"View the log file before the specified date/time. Defaults to the most recent log file.\") do |date_time|\n    config.parameter = \"before:#{date_time}\"\n  end\n  parser.on(\"-a [DATE/TIME]\", \"--after [DATE/TIME]\", \"View the log file after the specified date/time. Defaults to the oldest log file.\") do |date_time|\n    config.parameter = \"after:#{date_time}\"\n  end\n  parser.separator(\"\\nBe aware that this version of the playground will make a best-effort to properly sort log files, but if log files created with this version of the playground are mixed with log files from the Node.js version (which are not timestamped in the same way), unexpected results may occur.\")\nend"}}],"instance_methods":[{"html_id":"calculate_gaps_and_standard_deviation(logs)-instance-method","name":"calculate_gaps_and_standard_deviation","doc":"Given a sorted array of logs, calculate the standard deviation of the gaps in time\nbetween each of the logs.","summary":"<p>Given a sorted array of logs, calculate the standard deviation of the gaps in time between each of the logs.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs)","args_html":"(logs)","location":{"filename":"src/topos-playground/command/log.cr","line_number":417,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L417"},"def":{"name":"calculate_gaps_and_standard_deviation","args":[{"name":"logs","external_name":"logs","restriction":""}],"visibility":"Public","body":"sum = 0_i128\ngaps = [] of Int64\nn = logs.size - 1\nwhile n > 0\n  gap = (logs[n][2] - logs[n - 1][2]).to_i\n  sum = sum + gap\n  gaps << gap\n  n = n - 1\nend\naverage = sum / gaps.size\nsum_of_squared_differences = gaps.reduce(0_i128) do |sum, length|\n  sum + ((length - average) ** 2)\nend\nstandard_deviation = Math.sqrt(sum_of_squared_differences / gaps.size)\n{gaps, standard_deviation}\n"}},{"html_id":"do_list-instance-method","name":"do_list","doc":"Execute the logic of the `list` command. Logs are sorted by the timestamp embedded\ninto the UUID in the filename. If the UUID doesn't encode a valid timestamp, then\nthe file modification time is used. If it does encode a valid timestamp, but the\ntimestamp is for a time later than now, the file modification time is used. Likewise,\nif there is a gap between the timestamp of one log file and the next that is greater\nthan twice the standard deviation of the gaps between all of the log file, the timestamp\nwill be taken from the file modification time.\n\nThis heuristic lets the log files generated by this version of the playground, which\nare part of the UUID in the filename, to take precedence when sorting the files, but\nit allows the playground binary to also function in a reasonable and predictable way\nwith log files generated by the official Node.js version.","summary":"<p>Execute the logic of the <code>list</code> command.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":138,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L138"},"def":{"name":"do_list","visibility":"Public","body":"(log_sort(handle_erroneously_old_logs(generate_base_list))).tap do |logs|\n  print_logs(handle_erroneously_young_logs(logs, *calculate_gaps_and_standard_deviation(logs)))\nend"}},{"html_id":"do_prune-instance-method","name":"do_prune","doc":"Using the sorting heuristic for `#do_list` to sort files, allow pruning of log files\nby age, size, or range. The age is calculated in the same way as with the `#do_list`\nmethod. Ranges are indexed with 1 being the most recent file.","summary":"<p>Using the sorting heuristic for <code><a href=\"../../ToposPlayground/Command/Logs.html#do_list-instance-method\">#do_list</a></code> to sort files, allow pruning of log files by age, size, or range.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":207,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L207"},"def":{"name":"do_prune","visibility":"Public","body":"if config.parameter?\nelse\n  config.parameter = \"index:1\"\nend\noperation, selector = config.parameter?.to_s.split(\":\", 2)\n(log_sort(handle_erroneously_old_logs(generate_base_list))).tap do |logs|\n  sorted_logs = handle_erroneously_young_logs(logs, *calculate_gaps_and_standard_deviation(logs))\n  case operation\n  when \"days\"\n    do_prune_days(sorted_logs, selector)\n  when \"size\"\n    do_prune_size(sorted_logs, selector)\n  when \"range\"\n    do_prune_range(sorted_logs, selector)\n  when \"all\"\n    do_prune_all(sorted_logs, selector)\n  end\nend\n"}},{"html_id":"do_prune_days(sorted_logs,selector)-instance-method","name":"do_prune_days","doc":"Delete log files older than the specified number of days.","summary":"<p>Delete log files older than the specified number of days.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":230,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L230"},"def":{"name":"do_prune_days","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"selector = selector.to_s.to_i do\n  0\nend <= 0 ? 0 : selector.to_s.to_i\nbeginning_of_day = Time.local.at_beginning_of_day\nthreshold = beginning_of_day - Time::Span.new(seconds: ((selector * 24) * 60) * 60)\ncount = 0\nsorted_logs.each do |log|\n  if log[2] < threshold\n    count = count + 1\n    if config.dry_run?\n      (Log.for(\"stdout\")).info do\n        \"Would delete #{log[1]}\"\n      end\n    else\n      if config.verbose?\n        (Log.for(\"stdout\")).info do\n          \"Deleting #{log[1]}\"\n        end\n      end\n      File.delete(log[1])\n    end\n  end\nend\nshow_deletion_count(count)\n"}},{"html_id":"do_prune_range(sorted_logs,selector)-instance-method","name":"do_prune_range","doc":"Delete log files within the specified range. Ranges are indexed with 1 being the\nmost recent file. Alternatively, delete specific log files, by index, either alone,\nor in a comma separated list.","summary":"<p>Delete log files within the specified range.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":298,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L298"},"def":{"name":"do_prune_range","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"range_parts = (/^\\s*(\\d*)\\s*\\.\\.\\s*(\\d*)\\s*$/).match(selector.to_s)\nshow_deletion_count(if range_parts\n  do_prune_range_range_parts(sorted_logs, range_parts)\nelse\n  do_prune_range_selector_split(sorted_logs, selector)\nend)\n"}},{"html_id":"do_prune_size(sorted_logs,selector)-instance-method","name":"do_prune_size","doc":"Delete log files smaller than the specified size. This is useful for getting rid\nof log files that are empty, or that contain only a few lines of output.","summary":"<p>Delete log files smaller than the specified size.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":252,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L252"},"def":{"name":"do_prune_size","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"selector = parse_to_size(selector)\ncount = 0\nsorted_logs.each do |log|\n  if (File.info(log[1])).size < selector\n    count = count + 1\n    if config.dry_run?\n      (Log.for(\"stdout\")).info do\n        \"Would delete #{log[1]}\"\n      end\n    else\n      if config.verbose?\n        (Log.for(\"stdout\")).info do\n          \"Deleting #{log[1]}\"\n        end\n      end\n      File.delete(log[1])\n    end\n  end\nend\nshow_deletion_count(count)\n"}},{"html_id":"do_view-instance-method","name":"do_view","doc":"Using the sorting heuristic for `#do_list` to sort files, allow viewing of an individual\nlog file, selected by index, or by date/time -- the first file before or after a given\ndate/time.","summary":"<p>Using the sorting heuristic for <code><a href=\"../../ToposPlayground/Command/Logs.html#do_list-instance-method\">#do_list</a></code> to sort files, allow viewing of an individual log file, selected by index, or by date/time -- the first file before or after a given date/time.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":150,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L150"},"def":{"name":"do_view","visibility":"Public","body":"if config.parameter?\nelse\n  config.parameter = \"index:1\"\nend\noperation, selector = config.parameter?.to_s.split(\":\", 2)\n(log_sort(handle_erroneously_old_logs(generate_base_list))).tap do |logs|\n  sorted_logs = handle_erroneously_young_logs(logs, *calculate_gaps_and_standard_deviation(logs))\n  case operation\n  when \"index\"\n    do_view_index(sorted_logs, selector)\n  when \"before\"\n    do_view_before(sorted_logs, selector)\n  when \"after\"\n    do_view_after(sorted_logs, selector)\n  end\nend\n"}},{"html_id":"do_view_after(sorted_logs,selector)-instance-method","name":"do_view_after","doc":"Find the log file specified by the selector, which is a date/time, and display it.\nThis will show the first log file with a timestamp later than the selector.","summary":"<p>Find the log file specified by the selector, which is a date/time, and display it.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":194,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L194"},"def":{"name":"do_view_after","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"if selector.to_s.empty?\n  selector = (Time.unix(0)).to_s\nend\nlimit_date = ParseDate.parse(selector.to_s)\nif limit_date\n  log = sorted_logs.find do |_log|\n    _log[2] > limit_date\n  end\n  if log\n    show_log_file(log)\n  end\nend\n"}},{"html_id":"do_view_before(sorted_logs,selector)-instance-method","name":"do_view_before","doc":"Find the log file specified by the selector, which is a date/time, and display it.\nThis will show the first log file with a timestamp earlier than the selector.","summary":"<p>Find the log file specified by the selector, which is a date/time, and display it.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":182,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L182"},"def":{"name":"do_view_before","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"if selector.to_s.empty?\n  selector = Time.local\nend\nlimit_date = ParseDate.parse(selector.to_s)\nif limit_date\n  log = sorted_logs.reverse.find do |_log|\n    _log[2] < limit_date\n  end\n  if log\n    show_log_file(log)\n  end\nend\n"}},{"html_id":"do_view_index(sorted_logs,selector)-instance-method","name":"do_view_index","doc":"Find the log file specified by the selector, which is an index into the sorted list\nof log files, most recent first, and display it. If the selector is emtpy, show the\nmost recent log file.","summary":"<p>Find the log file specified by the selector, which is an index into the sorted list of log files, most recent first, and display it.</p>","abstract":false,"args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(sorted_logs, selector)","args_html":"(sorted_logs, selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":173,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L173"},"def":{"name":"do_view_index","args":[{"name":"sorted_logs","external_name":"sorted_logs","restriction":""},{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"selector = selector.to_s.to_i do\n  0\nend < 1 ? 1 : selector.to_s.to_i\nif selector > sorted_logs.size\n  selector = sorted_logs.size\nend\nshow_log_file(sorted_logs[-selector])\n"}},{"html_id":"generate_base_list:Array(Tuple(String,String,Time))-instance-method","name":"generate_base_list","doc":"Perform the first pass at creating a list of log files.","summary":"<p>Perform the first pass at creating a list of log files.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":386,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L386"},"def":{"name":"generate_base_list","return_type":"Array(Tuple(String, String, Time))","visibility":"Public","body":"files = Dir[\"#{config.log_dir.as(String)}/**\"].reject do |file|\n  (File.exists?(config.log_file_path.to_s)) && (File.same?(config.log_file_path.to_s, file))\nend\nfiles.compact_map do |file|\n  if match = UUID_REGEXP.match(file)\n    begin\n      {match[1], file, (CSUUID.new(match[1])).timestamp}\n    rescue\n      {match[1], file, (File.info(file)).modification_time}\n    end\n  end\nend\n"}},{"html_id":"handle_erroneously_old_logs(logs):Array(Tuple(String,String,Time))-instance-method","name":"handle_erroneously_old_logs","doc":"If there are any log files with a filename that reflects a timestamp later than\nthe current time, then it must be a randomly generated UUID from the official\nNode.js version of the topos-playground; pull the timestamp from the last\nmodification time.","summary":"<p>If there are any log files with a filename that reflects a timestamp later than the current time, then it must be a randomly generated UUID from the official Node.js version of the topos-playground; pull the timestamp from the last modification time.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs) : Array(Tuple(String, String, Time))","args_html":"(logs) : Array(Tuple(String, String, Time))","location":{"filename":"src/topos-playground/command/log.cr","line_number":403,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L403"},"def":{"name":"handle_erroneously_old_logs","args":[{"name":"logs","external_name":"logs","restriction":""}],"return_type":"Array(Tuple(String, String, Time))","visibility":"Public","body":"current_prefix = CSUUID.new.to_s[0..22]\nlogs.compact_map do |log|\n  if log[0][0..22] > current_prefix\n    {log[0], log[1], (File.info(log[1])).modification_time}\n  else\n    log\n  end\nend\n"}},{"html_id":"handle_erroneously_young_logs(logs,gaps,standard_deviation)-instance-method","name":"handle_erroneously_young_logs","doc":"With a modest statistical probability of being wrong, this should be able to identify\nthose logs which have accidentally created valid UUID timestamps that are too early\nin time to have been generated by this version of the playground. If the gap between\nthem is greater than three times the standard deviation, it will use the file modification\ntime instead of the timestamp.","summary":"<p>With a modest statistical probability of being wrong, this should be able to identify those logs which have accidentally created valid UUID timestamps that are too early in time to have been generated by this version of the playground.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""},{"name":"gaps","external_name":"gaps","restriction":""},{"name":"standard_deviation","external_name":"standard_deviation","restriction":""}],"args_string":"(logs, gaps, standard_deviation)","args_html":"(logs, gaps, standard_deviation)","location":{"filename":"src/topos-playground/command/log.cr","line_number":443,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L443"},"def":{"name":"handle_erroneously_young_logs","args":[{"name":"logs","external_name":"logs","restriction":""},{"name":"gaps","external_name":"gaps","restriction":""},{"name":"standard_deviation","external_name":"standard_deviation","restriction":""}],"visibility":"Public","body":"logs.map_with_index do |log, index|\n  if gaps[index]? && gaps[index] > (standard_deviation * 3)\n    {log[0], log[1], (File.info(log[1])).modification_time}\n  else\n    log\n  end\nend.compact"}},{"html_id":"multi_line_header(logs)-instance-method","name":"multi_line_header","doc":"Build the multi-line header.\n\n```\n #                                             Log File Path\n                  File Date                File Size\n```\n","summary":"<p>Build the multi-line header.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs)","args_html":"(logs)","location":{"filename":"src/topos-playground/command/log.cr","line_number":516,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L516"},"def":{"name":"multi_line_header","args":[{"name":"logs","external_name":"logs","restriction":""}],"visibility":"Public","body":"String.build do |str|\n  str << (\" #\".ljust(7))\n  str << (log_file_path_header.center(logs.first[1].size)).rstrip\n  str << \"\\n\"\n  str << (\" \" * short_file_to_date_delimiter.size)\n  str << (log_file_date_header.center((log_file_date(logs.first)).size))\n  str << (\" \" * date_to_size_delimiter.size)\n  str << (log_file_size_header.center(10))\nend"}},{"html_id":"parse_to_size(selector)-instance-method","name":"parse_to_size","doc":"Parse a size selector, which can be a number, or a number followed by a unit,\ninto a byte count. For example, `128b` or `10k or `1m` or `4g`.","summary":"<p>Parse a size selector, which can be a number, or a number followed by a unit, into a byte count.</p>","abstract":false,"args":[{"name":"selector","external_name":"selector","restriction":""}],"args_string":"(selector)","args_html":"(selector)","location":{"filename":"src/topos-playground/command/log.cr","line_number":272,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L272"},"def":{"name":"parse_to_size","args":[{"name":"selector","external_name":"selector","restriction":""}],"visibility":"Public","body":"parts = (/^\\s*(\\d+)\\s*([bBkKmMgG]*)/).match(selector.to_s)\nif parts.nil?\n  return 1024\nend\nnumber_part = parts[1].to_i?\nif number_part\nelse\n  return 1024\nend\nunit_part = parts[2]? ? parts[2].downcase : \"b\"\ncase unit_part\nwhen \"b\"\n  number_part.to_i\nwhen \"k\", \"kb\"\n  number_part.to_i * 1024\nwhen \"m\", \"mb\"\n  (number_part.to_i * 1024) * 1024\nwhen \"g\", \"gb\"\n  ((number_part.to_i * 1024) * 1024) * 1024\nelse\n  number_part\nend\n"}},{"html_id":"print_header(logs)-instance-method","name":"print_header","doc":"print the header for the sorted list of logs\n\nThere are two formats for the header, depending on whether the logs will be printed in single\nline format or multi-line format.","summary":"<p>print the header for the sorted list of logs</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs)","args_html":"(logs)","location":{"filename":"src/topos-playground/command/log.cr","line_number":479,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L479"},"def":{"name":"print_header","args":[{"name":"logs","external_name":"logs","restriction":""}],"visibility":"Public","body":"header = if (single_line_size(logs.first)) > ToposPlayground.terminal_width\n  multi_line_header(logs)\nelse\n  single_line_header(logs)\nend\n(Log.for(\"stdout\")).info do\n  ToposPlayground.break_text(header, ToposPlayground.terminal_width)\nend\n"}},{"html_id":"print_logs(logs)-instance-method","name":"print_logs","doc":"Print the sorted list of logs.\n\nThis is comprised of a header, and then a line for each log file. If the single-line format\nis too wide for the terminal, the multi-line format will be used. Regarding, though, line\nwrapping is still applied, so that everything stays relatively formatted, even on small\nterminal windows.","summary":"<p>Print the sorted list of logs.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs)","args_html":"(logs)","location":{"filename":"src/topos-playground/command/log.cr","line_number":459,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L459"},"def":{"name":"print_logs","args":[{"name":"logs","external_name":"logs","restriction":""}],"visibility":"Public","body":"print_header(logs)\n(log_sort(logs)).each_with_index do |log, index|\n  line = if (single_line_size(log)) > ToposPlayground.terminal_width\n    multi_line(log, logs.size - index)\n  else\n    single_line(log, logs.size - index)\n  end\n  (Log.for(\"stdout\")).info do\n    ToposPlayground.break_text(line, ToposPlayground.terminal_width)\n  end\nend\n"}},{"html_id":"run-instance-method","name":"run","doc":"Act on the log subcommand (`list`, `view`, or `prune`).","summary":"<p>Act on the log subcommand (<code>list</code>, <code>view</code>, or <code>prune</code>).</p>","abstract":false,"location":{"filename":"src/topos-playground/command/log.cr","line_number":115,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L115"},"def":{"name":"run","visibility":"Public","body":"case config.subcommand?\nwhen \"list\"\n  do_list\nwhen \"view\"\n  do_view\nwhen \"prune\"\n  do_prune\nend"}},{"html_id":"show_deletion_count(count)-instance-method","name":"show_deletion_count","doc":"Output the number of deleted files.","summary":"<p>Output the number of deleted files.</p>","abstract":false,"args":[{"name":"count","external_name":"count","restriction":""}],"args_string":"(count)","args_html":"(count)","location":{"filename":"src/topos-playground/command/log.cr","line_number":370,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L370"},"def":{"name":"show_deletion_count","args":[{"name":"count","external_name":"count","restriction":""}],"visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"Deleted #{count} log files.\"\nend"}},{"html_id":"show_log_file(log)-instance-method","name":"show_log_file","doc":"Display the given log file.","summary":"<p>Display the given log file.</p>","abstract":false,"args":[{"name":"log","external_name":"log","restriction":""}],"args_string":"(log)","args_html":"(log)","location":{"filename":"src/topos-playground/command/log.cr","line_number":375,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L375"},"def":{"name":"show_log_file","args":[{"name":"log","external_name":"log","restriction":""}],"visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  log[1].center(ToposPlayground.terminal_width)\nend\n(Log.for(\"stdout\")).info do\n  \"-------\".center(ToposPlayground.terminal_width)\nend\n(Log.for(\"stdout\")).info do\n  File.read(log[1])\nend\n"}},{"html_id":"single_line_header(logs)-instance-method","name":"single_line_header","doc":"Build the single-line header.\n\n```\n#                                             Log File Path                                                             File Date                File Size\n```\n","summary":"<p>Build the single-line header.</p>","abstract":false,"args":[{"name":"logs","external_name":"logs","restriction":""}],"args_string":"(logs)","args_html":"(logs)","location":{"filename":"src/topos-playground/command/log.cr","line_number":498,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L498"},"def":{"name":"single_line_header","args":[{"name":"logs","external_name":"logs","restriction":""}],"visibility":"Public","body":"String.build do |str|\n  str << (\" #\".ljust(7))\n  str << (log_file_path_header.center(logs.first[1].size))\n  str << (\" \" * file_to_date_delimiter.size)\n  str << (log_file_date_header.center((log_file_date(logs.first)).size))\n  str << (\" \" * date_to_size_delimiter.size)\n  str << (log_file_size_header.center(10))\nend"}}]},{"html_id":"topos-playground.cr/ToposPlayground/Command/Start","path":"ToposPlayground/Command/Start.html","kind":"class","full_name":"ToposPlayground::Command::Start","name":"Start","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command/start.cr","line_number":6,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L6"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DOCKER_COMPOSE_VERSION_REGEXP","name":"DOCKER_COMPOSE_VERSION_REGEXP","value":"/Docker Compose version v([0-9]+\\.[0-9]+\\.[0-9]+)/m"},{"id":"DOCKER_VERSION_REGEXP","name":"DOCKER_VERSION_REGEXP","value":"/Docker version ([0-9]+\\.[0-9]+\\.[0-9]+)/m"},{"id":"GIT_REPOS","name":"GIT_REPOS","value":"{ {org: \"topos-protocol\", repo: \"local-erc20-messaging-infra\", branch: \"v0.1.8\"}, {org: \"topos-protocol\", repo: \"dapp-frontend-erc20-messaging\", branch: \"v0.1.6\"}, {org: \"topos-protocol\", repo: \"executor-service\", branch: \"v0.2.1\"} }"},{"id":"GIT_VERSION_REGEXP","name":"GIT_VERSION_REGEXP","value":"/git version ([0-9]+\\.[0-9]+\\.[0-9]+)/m"},{"id":"MIN_VERSION_DOCKER","name":"MIN_VERSION_DOCKER","value":"SemanticVersion.parse(\"17.06.0\")"},{"id":"MIN_VERSION_DOCKER_COMPOSE","name":"MIN_VERSION_DOCKER_COMPOSE","value":"SemanticVersion.parse(\"2.0.0\")"},{"id":"MIN_VERSION_GIT","name":"MIN_VERSION_GIT","value":"SemanticVersion.parse(\"2.0.0\")"},{"id":"MIN_VERSION_NODEJS","name":"MIN_VERSION_NODEJS","value":"SemanticVersion.parse(\"16.0.0\")"},{"id":"NODEJS_VERSION_REGEXP","name":"NODEJS_VERSION_REGEXP","value":"/v([0-9]+\\.[0-9]+\\.[0-9]+)/m"},{"id":"REDIS_CONTAINER_NAME","name":"REDIS_CONTAINER_NAME","value":"\"redis-stack-server\""}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"class_methods":[{"html_id":"levenshtein_options-class-method","name":"levenshtein_options","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":48,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L48"},"def":{"name":"levenshtein_options","visibility":"Public","body":"{\"start\" => {} of String => Array(String)}"}},{"html_id":"log_to_file?(config)-class-method","name":"log_to_file?","abstract":false,"args":[{"name":"config","external_name":"config","restriction":""}],"args_string":"(config)","args_html":"(config)","location":{"filename":"src/topos-playground/command/start.cr","line_number":54,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L54"},"def":{"name":"log_to_file?","args":[{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"true"}},{"html_id":"options(parser,config)-class-method","name":"options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/start.cr","line_number":42,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L42"},"def":{"name":"options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"start\", \"Verify that all dependencies are installed, clone any needed repositories, setup the environment, and start all of the docker containers for the Playground\") do\n  config.command = \"start\"\nend"}}],"instance_methods":[{"html_id":"build_dapp_frontend_service(secrets_path,dapp_frontend_service_path)-instance-method","name":"build_dapp_frontend_service","abstract":false,"args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"dapp_frontend_service_path","external_name":"dapp_frontend_service_path","restriction":""}],"args_string":"(secrets_path, dapp_frontend_service_path)","args_html":"(secrets_path, dapp_frontend_service_path)","location":{"filename":"src/topos-playground/command/start.cr","line_number":377,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L377"},"def":{"name":"build_dapp_frontend_service","args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"dapp_frontend_service_path","external_name":"dapp_frontend_service_path","restriction":""}],"visibility":"Public","body":"npm = (Process.find_executable(\"npm\")) || \"npm\"\nstatus, output = run_process(\"#{shell} -c \\\"source #{secrets_path} && #{npm} run frontend:build\\\"\", chdir: dapp_frontend_service_path)\nif status.success?\n  (Log.for(\"stdout\")).info do\n    \"‚úÖ dApp Frontend is built\"\n  end\nelse\n  Error.error do\n    \"#{status.exit_reason}: Failed to build dApp Frontend: #{output}\"\n  end\n  exit(status.exit_code)\nend\n"}},{"html_id":"clone_git_repositories-instance-method","name":"clone_git_repositories","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":172,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L172"},"def":{"name":"clone_git_repositories","visibility":"Public","body":"begin\n  (Log.for(\"stdout\")).info do\n    \"\"\n  end\n  (Log.for(\"stdout\")).info do\n    \"Cloning git repositories...\"\n  end\n  GIT_REPOS.each do |repo|\n    repo_path = File.join(config.cache_dir.to_s, repo[:repo])\n    if Dir.exists?(repo_path)\n      (Log.for(\"stdout\")).info do\n        \"‚úÖ #{repo[:repo]}#{repo[:branch] ? \" | #{repo[:branch]}\" : \"\"} already cloned\"\n      end\n      update_repository(repo_path)\n    else\n      (Log.for(\"stdout\")).info do\n        \"Cloning #{repo[:org]}/#{repo[:repo]}...\"\n      end\n      status, _ = run_process(\"git clone --depth 1 #{repo[:branch] ? \"--branch #{repo[:branch]}\" : \"\"} https://github.com/#{repo[:org]}/#{repo[:repo]}.git #{repo_path}\")\n      if status.success?\n        (Log.for(\"stdout\")).info do\n          \"‚úÖ #{repo[:repo]}#{repo[:branch] ? \" | #{repo[:branch]}\" : \"\"} successfully cloned\"\n        end\n        Fiber.yield\n      else\n        (Log.for(\"stdout\")).info do\n          \"‚ùå #{repo[:repo]}#{repo[:branch] ? \" | #{repo[:branch]}\" : \"\"} failed to clone\"\n        end\n      end\n    end\n  end\nrescue ex\n  Error.error do\n    \"Failed to clone git repositories: #{ex.message}\"\n  end\n  exit(1)\nend"}},{"html_id":"completion_banner-instance-method","name":"completion_banner","doc":"Everything is done; display some final information to the user.","summary":"<p>Everything is done; display some final information to the user.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":419,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L419"},"def":{"name":"completion_banner","visibility":"Public","body":"banner = \"\\nüî• Everything is done! üî•\\n\\nüöÄ Start sending ERC20 tokens across subnets by accessing the dApp Frontend at http://localhost:3001\\n\\nCtrl/cmd-c will shut down the dApp Frontend and the Executor Service BUT will keep subnets and the TCE running (use the clean command to shut them down)\\n\\nLogs were written to #{config.log_file_path}\"\n(Log.for(\"stdout\")).info do\n  banner\nend\n"}},{"html_id":"copy_env_files-instance-method","name":"copy_env_files","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":224,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L224"},"def":{"name":"copy_env_files","visibility":"Public","body":"begin\n  (Log.for(\"stdout\")).info do\n    \"\"\n  end\n  (Log.for(\"stdout\")).info do\n    \"Copying env files...\"\n  end\n  Fiber.yield\n  EnvRegistry.classes.each do |env_class|\n    env_file = env_class.new\n    if content = env_file.content\n      filename = sub_working_dir(env_file.path.to_s)\n      if File.exists?(filename)\n        (Log.for(\"stdout\")).info do\n          \"‚úÖ #{filename} already exists\"\n        end\n      else\n        File.open(filename, \"w+\") do |fh|\n          fh.write(content.to_slice)\n        end\n        (Log.for(\"stdout\")).info do\n          \"‚úÖ #{filename} file successfully created\"\n        end\n        Fiber.yield\n      end\n    end\n  end\nrescue ex\n  Error.error do\n    \"Failed to copy env files: #{ex.message}\"\n  end\n  exit(1)\nend"}},{"html_id":"copy_git_repositories_from_cache-instance-method","name":"copy_git_repositories_from_cache","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":212,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L212"},"def":{"name":"copy_git_repositories_from_cache","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"\"\nend\n(Log.for(\"stdout\")).info do\n  \"Copying git repositories from cache...\"\nend\nGIT_REPOS.each do |repo|\n  cache_path = File.join(config.cache_dir.to_s, repo[:repo])\n  repo_path = File.join(config.working_dir.to_s, repo[:repo])\n  if File.exists?(repo_path)\n    FileUtils.rm_r(repo_path)\n  end\n  FileUtils.cp_r(cache_path, repo_path)\n  (Log.for(\"stdout\")).info do\n    \"‚úÖ Copied #{repo[:repo]}\"\n  end\nend\n"}},{"html_id":"do_npm_install(path)-instance-method","name":"do_npm_install","abstract":false,"args":[{"name":"path","external_name":"path","restriction":""}],"args_string":"(path)","args_html":"(path)","location":{"filename":"src/topos-playground/command/start.cr","line_number":333,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L333"},"def":{"name":"do_npm_install","args":[{"name":"path","external_name":"path","restriction":""}],"visibility":"Public","body":"begin\n  npm = (Process.find_executable(\"npm\")) || \"npm\"\n  status, output = run_process(\"#{npm} install\", chdir: path)\n  if status.success?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Dependencies are installed\"\n    end\n  else\n    Error.error do\n      \"#{status.exit_reason}: Failed to install dependencies: #{output}\"\n    end\n    exit(status.exit_code)\n  end\nrescue ex\n  Error.error do\n    \"Failed to install dependencies: #{ex.message}\"\n  end\nend"}},{"html_id":"parse_contract_addresses_to_hash(filename)-instance-method","name":"parse_contract_addresses_to_hash","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/topos-playground/command/start.cr","line_number":303,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L303"},"def":{"name":"parse_contract_addresses_to_hash","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"result = {} of String => String\nFile.open(filename, \"r\") do |fh|\n  fh.each_line do |line|\n    if line.strip.empty?\n      next\n    end\n    matches = (line.gsub(/export\\s+/, \"\")).split(/=/)\n    result[matches[0]] = matches[1]\n  end\nend\nresult\n"}},{"html_id":"retrieve_and_write_contract_addresses_to_env-instance-method","name":"retrieve_and_write_contract_addresses_to_env","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":275,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L275"},"def":{"name":"retrieve_and_write_contract_addresses_to_env","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"\"\nend\n(Log.for(\"stdout\")).info do\n  \"Retrieving contract addresses...\"\nend\nrun_process(\"docker cp contracts-topos:/contracts/.env #{config.working_dir}/.env.addresses\", env: EnvRegistry[\"secrets\"].new.env)\nenv_hash = parse_contract_addresses_to_hash(\"#{config.working_dir}/.env.addresses\")\nFile.open(sub_working_dir(EnvRegistry[\"dappfrontend\"].new.path), \"a+\") do |fh|\n  fh.puts(\"VITE_SUBNET_REGISTRATOR_CONTRACT_ADDRESS=#{env_hash[\"SUBNET_REGISTRATOR_CONTRACT_ADDRESS\"]}\")\n  fh.puts(\"VITE_TOPOS_CORE_PROXY_CONTRACT_ADDRESS=#{env_hash[\"TOPOS_CORE_PROXY_CONTRACT_ADDRESS\"]}\")\n  fh.puts(\"VITE_ERC20_MESSAGING_CONTRACT_ADDRESS=#{env_hash[\"ERC20_MESSAGING_CONTRACT_ADDRESS\"]}\")\nend\n(Log.for(\"stdout\")).info do\n  \"‚úÖ Contract addresses successfully written to #{sub_working_dir(EnvRegistry[\"dappfrontend\"].new.path)}\"\nend\nFile.open(sub_working_dir(EnvRegistry[\"executorservice\"].new.path), \"a+\") do |fh|\n  fh.puts(\"SUBNET_REGISTRATOR_CONTRACT_ADDRESS=#{env_hash[\"SUBNET_REGISTRATOR_CONTRACT_ADDRESS\"]}\")\n  fh.puts(\"TOPOS_CORE_PROXY_CONTRACT_ADDRESS=#{env_hash[\"TOPOS_CORE_PROXY_CONTRACT_ADDRESS\"]}\")\nend\n(Log.for(\"stdout\")).info do\n  \"‚úÖ Contract addresses successfully written to #{sub_working_dir(EnvRegistry[\"executorservice\"].new.path)}\"\nend\n"}},{"html_id":"run-instance-method","name":"run","doc":"All subclasses must implement `#run`, which is responsible for carrying out the\nlogic of the command.","summary":"<p>All subclasses must implement <code><a href=\"../../ToposPlayground/Command/Start.html#run-instance-method\">#run</a></code>, which is responsible for carrying out the logic of the command.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":58,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L58"},"def":{"name":"run","visibility":"Public","body":"background_processes = [] of Tuple(Channel(Bool), Channel(String), Process)\n(Log.for(\"stdout\")).info do\n  \"Starting Topos-Playground...\\n\"\nend\nverify_dependency_installation\nif config.offline?\n  validate_git_cache\nelse\n  clone_git_repositories\nend\ncopy_git_repositories_from_cache\ncopy_env_files\nrun_redis\nrun_local_erc20_messaging_infra\nretrieve_and_write_contract_addresses_to_env\nrun_executor_service.tap do |background_process|\n  setup_io_handlers_for_background_process(background_process)\n  background_processes << background_process\nend\nrun_dapp_frontend_service.tap do |background_process|\n  setup_io_handlers_for_background_process(background_process)\n  background_processes << background_process\nend\ncompletion_banner\nwait_for(background_processes)\n"}},{"html_id":"run_dapp_frontend_service-instance-method","name":"run_dapp_frontend_service","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":406,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L406"},"def":{"name":"run_dapp_frontend_service","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"\"\nend\n(Log.for(\"stdout\")).info do\n  \"Running the dApp Frontend...\"\nend\nsecrets_path = File.join(config.working_dir.to_s, \".env.secrets\")\ndapp_frontend_service_path = File.join(config.working_dir.to_s, \"dapp-frontend-erc20-messaging\")\ndo_npm_install(dapp_frontend_service_path)\nbuild_dapp_frontend_service(secrets_path, dapp_frontend_service_path)\nstart_dapp_frontend_service(secrets_path, dapp_frontend_service_path)\n"}},{"html_id":"run_executor_service-instance-method","name":"run_executor_service","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":366,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L366"},"def":{"name":"run_executor_service","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"\"\nend\n(Log.for(\"stdout\")).info do\n  \"Running the Executor Service...\"\nend\nsecrets_path = File.join(config.working_dir.to_s, \".env.secrets\")\nexecutor_service_path = File.join(config.working_dir.to_s, \"executor-service\")\ndo_npm_install(executor_service_path)\nstart_executor_service(secrets_path, executor_service_path)\n"}},{"html_id":"run_local_erc20_messaging_infra-instance-method","name":"run_local_erc20_messaging_infra","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":256,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L256"},"def":{"name":"run_local_erc20_messaging_infra","visibility":"Public","body":"begin\n  (Log.for(\"stdout\")).info do\n    \"\"\n  end\n  (Log.for(\"stdout\")).info do\n    \"Running the ERC20 messaging infrastructures...\"\n  end\n  status, output = run_process(\"#{shell} -c \\\"source #{config.working_dir}/.env.secrets && docker compose up -d\\\"\", chdir: config.execution_path.to_s, env: EnvRegistry[\"secrets\"].new.env)\n  if status.success?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Subnets & TCE are running\"\n    end\n  else\n    Error.error do\n      \"#{status.exit_reason}: Failure while starting the subnets & TCE: #{output}\"\n    end\n    exit(status.exit_code)\n  end\nrescue ex\n  Error.error do\n    \"Failed to start the subnets & TCE: #{ex.message}\"\n  end\nend"}},{"html_id":"run_redis-instance-method","name":"run_redis","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":316,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L316"},"def":{"name":"run_redis","visibility":"Public","body":"begin\n  (Log.for(\"stdout\")).info do\n    \"\"\n  end\n  (Log.for(\"stdout\")).info do\n    \"Running the redis server...\"\n  end\n  command = \"docker start #{REDIS_CONTAINER_NAME} || \" + \"docker run -d --name #{REDIS_CONTAINER_NAME} -p 6379:6379 redis/#{REDIS_CONTAINER_NAME}:latest\"\n  status, output = run_process(command)\n  if status.success?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Redis server is running\"\n    end\n  else\n    Error.error do\n      \"#{status.exit_reason}: Failure while starting the redis server: #{output}\"\n    end\n    exit(status.exit_code)\n  end\nrescue ex\n  Error.error do\n    \"Failed to start the redis server: #{ex.message}\"\n  end\nend"}},{"html_id":"setup_io_handlers_for_background_process(background_process)-instance-method","name":"setup_io_handlers_for_background_process","doc":"Setup an `at_exit` handler to ensure that the started processes are cleaned up upon\n`topos-playground` exiting. Also spawn a fiber to monitor the processes and print\nany IO sent to the monitor channel.","summary":"<p>Setup an <code>at_exit</code> handler to ensure that the started processes are cleaned up upon <code>topos-playground</code> exiting.</p>","abstract":false,"args":[{"name":"background_process","external_name":"background_process","restriction":""}],"args_string":"(background_process)","args_html":"(background_process)","location":{"filename":"src/topos-playground/command/start.cr","line_number":437,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L437"},"def":{"name":"setup_io_handlers_for_background_process","args":[{"name":"background_process","external_name":"background_process","restriction":""}],"visibility":"Public","body":"at_exit do\n  kill_channel, _, process = background_process\n  begin\n    process.terminate\n  rescue ex : RuntimeError\n  end\n  kill_channel.send(true)\nend\nspawn do\n  _, monitor_channel, process = background_process\n  while (!monitor_channel.closed?) && (!process.terminated?)\n    puts(monitor_channel.receive)\n  end\nend\n"}},{"html_id":"shell-instance-method","name":"shell","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":252,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L252"},"def":{"name":"shell","visibility":"Public","body":"[\"bash\", \"zsh\"].compact_map do |exe|\n  Process.find_executable(exe)\nend[0]? || \"/bin/bash\""}},{"html_id":"start_dapp_frontend_service(secrets_path,dapp_frontend_service_path):Tuple(Channel(Bool),Channel(String),Process)-instance-method","name":"start_dapp_frontend_service","abstract":false,"args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"dapp_frontend_service_path","external_name":"dapp_frontend_service_path","restriction":""}],"args_string":"(secrets_path, dapp_frontend_service_path) : Tuple(Channel(Bool), Channel(String), Process)","args_html":"(secrets_path, dapp_frontend_service_path) : Tuple(Channel(Bool), Channel(String), Process)","location":{"filename":"src/topos-playground/command/start.cr","line_number":393,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L393"},"def":{"name":"start_dapp_frontend_service","args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"dapp_frontend_service_path","external_name":"dapp_frontend_service_path","restriction":""}],"return_type":"Tuple(Channel(Bool), Channel(String), Process)","visibility":"Public","body":"npm = (Process.find_executable(\"npm\")) || \"npm\"\nkill_channel, monitor_channel, process = run_process(\"#{shell} -c \\\"source #{secrets_path} && #{npm} run backend:start\\\"\", chdir: dapp_frontend_service_path, background: true)\n(Log.for(\"stdout\")).info do\n  \"‚úÖ dApp Frontend is running\"\nend\n{kill_channel, monitor_channel, process}\n"}},{"html_id":"start_executor_service(secrets_path,executor_service_path):Tuple(Channel(Bool),Channel(String),Process)-instance-method","name":"start_executor_service","abstract":false,"args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"executor_service_path","external_name":"executor_service_path","restriction":""}],"args_string":"(secrets_path, executor_service_path) : Tuple(Channel(Bool), Channel(String), Process)","args_html":"(secrets_path, executor_service_path) : Tuple(Channel(Bool), Channel(String), Process)","location":{"filename":"src/topos-playground/command/start.cr","line_number":351,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L351"},"def":{"name":"start_executor_service","args":[{"name":"secrets_path","external_name":"secrets_path","restriction":""},{"name":"executor_service_path","external_name":"executor_service_path","restriction":""}],"return_type":"Tuple(Channel(Bool), Channel(String), Process)","visibility":"Public","body":"npm = (Process.find_executable(\"npm\")) || \"npm\"\nkill_channel, monitor_channel, process = run_process(\"#{shell} -c \\\"source #{secrets_path} && #{npm} start\\\"\", chdir: executor_service_path, env: nil, background: true)\n(Log.for(\"stdout\")).info do\n  \"‚úÖ Executor Service is running\"\nend\n{kill_channel, monitor_channel, process}\n"}},{"html_id":"sub_working_dir(path)-instance-method","name":"sub_working_dir","abstract":false,"args":[{"name":"path","external_name":"path","restriction":""}],"args_string":"(path)","args_html":"(path)","location":{"filename":"src/topos-playground/command/start.cr","line_number":248,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L248"},"def":{"name":"sub_working_dir","args":[{"name":"path","external_name":"path","restriction":""}],"visibility":"Public","body":"path.to_s.gsub(/WORKINGDIR/, config.working_dir.to_s)"}},{"html_id":"update_repository(repo_path)-instance-method","name":"update_repository","abstract":false,"args":[{"name":"repo_path","external_name":"repo_path","restriction":""}],"args_string":"(repo_path)","args_html":"(repo_path)","location":{"filename":"src/topos-playground/command/start.cr","line_number":197,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L197"},"def":{"name":"update_repository","args":[{"name":"repo_path","external_name":"repo_path","restriction":""}],"visibility":"Public","body":"begin\n  status, output = run_process(\"git pull\", repo_path)\n  if status.success?\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ Respository is up-to-date\"\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"‚ùå Repository update failed: #{output}\"\n    end\n  end\nrescue ex\n  Error.error do\n    \"Repository update failed: #{ex.message}\"\n  end\n  exit(1)\nend"}},{"html_id":"validate_git_cache-instance-method","name":"validate_git_cache","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":156,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L156"},"def":{"name":"validate_git_cache","visibility":"Public","body":"(Log.for(\"stdout\")).info do\n  \"\"\nend\n(Log.for(\"stdout\")).info do\n  \"Validating git cache for offline use...\"\nend\nGIT_REPOS.each do |repo|\n  repo_path = File.join(config.cache_dir.to_s, repo[:repo])\n  if Dir.exists?(repo_path)\n    (Log.for(\"stdout\")).info do\n      \"‚úÖ #{repo[:repo]}#{repo[:branch] ? \" | #{repo[:branch]}\" : \"\"} is cached\"\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"‚ùå #{repo[:repo]}#{repo[:branch] ? \" | #{repo[:branch]}\" : \"\"} not found in cache\"\n    end\n    Error.error do\n      \"Git cache is not valid. Please run the start command with an internet connection to download the git repositories.\"\n    end\n    exit(1)\n  end\nend\n"}},{"html_id":"verify_dependency_installation-instance-method","name":"verify_dependency_installation","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":89,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L89"},"def":{"name":"verify_dependency_installation","visibility":"Public","body":"verify_nodejs_installation\nverify_docker_installation\nverify_docker_compose_installation\nverify_git_installation\n"}},{"html_id":"verify_docker_compose_installation-instance-method","name":"verify_docker_compose_installation","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":112,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L112"},"def":{"name":"verify_docker_compose_installation","visibility":"Public","body":"version_check(command: \"docker compose version\", version: MIN_VERSION_DOCKER_COMPOSE, version_regexp: DOCKER_COMPOSE_VERSION_REGEXP, formal_label: \"Docker Compose\", inline_label: \"docker-compose\")"}},{"html_id":"verify_docker_installation-instance-method","name":"verify_docker_installation","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":105,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L105"},"def":{"name":"verify_docker_installation","visibility":"Public","body":"version_check(command: \"docker --version\", version: MIN_VERSION_DOCKER, version_regexp: DOCKER_VERSION_REGEXP, formal_label: \"Docker\")"}},{"html_id":"verify_git_installation-instance-method","name":"verify_git_installation","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":122,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L122"},"def":{"name":"verify_git_installation","visibility":"Public","body":"version_check(command: \"git version\", version: MIN_VERSION_GIT, version_regexp: GIT_VERSION_REGEXP, formal_label: \"Git\")"}},{"html_id":"verify_nodejs_installation-instance-method","name":"verify_nodejs_installation","abstract":false,"location":{"filename":"src/topos-playground/command/start.cr","line_number":96,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L96"},"def":{"name":"verify_nodejs_installation","visibility":"Public","body":"version_check(command: \"node --version\", version: MIN_VERSION_NODEJS, version_regexp: NODEJS_VERSION_REGEXP, formal_label: \"Node.js\")"}},{"html_id":"version_check(command,version,version_regexp,formal_label,inline_label=nil)-instance-method","name":"version_check","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""},{"name":"version","external_name":"version","restriction":""},{"name":"version_regexp","external_name":"version_regexp","restriction":""},{"name":"formal_label","external_name":"formal_label","restriction":""},{"name":"inline_label","default_value":"nil","external_name":"inline_label","restriction":""}],"args_string":"(command, version, version_regexp, formal_label, inline_label = nil)","args_html":"(command, version, version_regexp, formal_label, inline_label = <span class=\"n\">nil</span>)","location":{"filename":"src/topos-playground/command/start.cr","line_number":131,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L131"},"def":{"name":"version_check","args":[{"name":"command","external_name":"command","restriction":""},{"name":"version","external_name":"version","restriction":""},{"name":"version_regexp","external_name":"version_regexp","restriction":""},{"name":"formal_label","external_name":"formal_label","restriction":""},{"name":"inline_label","default_value":"nil","external_name":"inline_label","restriction":""}],"visibility":"Public","body":"begin\n  status, output = run_process(command)\n  if status.success? && (match = output.to_s.match(version_regexp))\n    if (SemanticVersion.parse(match[1])) >= version\n      (Log.for(\"stdout\")).info do\n        \"‚úÖ #{formal_label} -- Version: #{match[1]}\"\n      end\n    else\n      (Log.for(\"stdout\")).info do\n        \"‚ùå #{formal_label} -- Version: #{match[1]}\"\n      end\n      Error.error do\n        \"#{formal_label} #{match[1]} is not supported. Please upgrade #{formal_label} to #{version} or higher.\"\n      end\n      exit(1)\n    end\n  else\n    (Log.for(\"stdout\")).info do\n      \"Failed to verify #{inline_label || formal_label} installation: #{output}\"\n    end\n    exit(1)\n  end\nrescue ex\n  Error.error do\n    \"Failed to verify #{inline_label || formal_label} installation: #{ex.message}\"\n  end\n  exit(1)\nend"}},{"html_id":"wait_for(background_processes)-instance-method","name":"wait_for","doc":"Block, waiting for the watched processes to die. They may be killed manually,\nor via the `at_exit` handler that was created when they were started, and which\nis triggered by the `topos-playground` process exiting, such as when `ctrl-c` is\npressed.","summary":"<p>Block, waiting for the watched processes to die.</p>","abstract":false,"args":[{"name":"background_processes","external_name":"background_processes","restriction":""}],"args_string":"(background_processes)","args_html":"(background_processes)","location":{"filename":"src/topos-playground/command/start.cr","line_number":460,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/start.cr#L460"},"def":{"name":"wait_for","args":[{"name":"background_processes","external_name":"background_processes","restriction":""}],"visibility":"Public","body":"background_processes.each do |background_process|\n  kill_channel, _, process = background_process\n  process.wait\n  if kill_channel.closed?\n  else\n    kill_channel.send(true)\n  end\nend"}}]},{"html_id":"topos-playground.cr/ToposPlayground/Command/Version","path":"ToposPlayground/Command/Version.html","kind":"class","full_name":"ToposPlayground::Command::Version","name":"Version","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command/version.cr","line_number":3,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/version.cr#L3"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Command","kind":"class","full_name":"ToposPlayground::Command","name":"Command"},"class_methods":[{"html_id":"levenshtein_options-class-method","name":"levenshtein_options","abstract":false,"location":{"filename":"src/topos-playground/command/version.cr","line_number":10,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/version.cr#L10"},"def":{"name":"levenshtein_options","visibility":"Public","body":"{\"version\" => {} of String => Array(String)}"}},{"html_id":"options(parser,config)-class-method","name":"options","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(parser, config)","args_html":"(parser, config)","location":{"filename":"src/topos-playground/command/version.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/version.cr#L4"},"def":{"name":"options","args":[{"name":"parser","external_name":"parser","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"parser.on(\"version\", \"Show topos-playground version (v#{ToposPlayground::VERSION})\") do\n  (self.new(config)).run\nend"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","doc":"All subclasses must implement `#run`, which is responsible for carrying out the\nlogic of the command.","summary":"<p>All subclasses must implement <code><a href=\"../../ToposPlayground/Command/Version.html#run-instance-method\">#run</a></code>, which is responsible for carrying out the logic of the command.</p>","abstract":false,"location":{"filename":"src/topos-playground/command/version.cr","line_number":14,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/version.cr#L14"},"def":{"name":"run","visibility":"Public","body":"puts(\"topos-playground version #{ToposPlayground::VERSION}\")\nexit\n"}}]}]},{"html_id":"topos-playground.cr/ToposPlayground/CommandRegistry","path":"ToposPlayground/CommandRegistry.html","kind":"class","full_name":"ToposPlayground::CommandRegistry","name":"CommandRegistry","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Registry","kind":"class","full_name":"ToposPlayground::Registry","name":"Registry"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Registry","kind":"class","full_name":"ToposPlayground::Registry","name":"Registry"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/command_registry.cr","line_number":7,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command_registry.cr#L7"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"doc":"A subclass of `Registry` that maps command names to command classes.\nAll classes that inherit from `Command` are automatically registered.","summary":"<p>A subclass of <code><a href=\"../ToposPlayground/Registry.html\">Registry</a></code> that maps command names to command classes.</p>"},{"html_id":"topos-playground.cr/ToposPlayground/Env","path":"ToposPlayground/Env.html","kind":"struct","full_name":"ToposPlayground::Env","name":"Env","abstract":true,"superclass":{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"topos-playground.cr/ToposPlayground/Env/DappBackend","kind":"struct","full_name":"ToposPlayground::Env::DappBackend","name":"DappBackend"},{"html_id":"topos-playground.cr/ToposPlayground/Env/DappFrontend","kind":"struct","full_name":"ToposPlayground::Env::DappFrontend","name":"DappFrontend"},{"html_id":"topos-playground.cr/ToposPlayground/Env/ExecutorService","kind":"struct","full_name":"ToposPlayground::Env::ExecutorService","name":"ExecutorService"},{"html_id":"topos-playground.cr/ToposPlayground/Env/Secrets","kind":"struct","full_name":"ToposPlayground::Env::Secrets","name":"Secrets"}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/topos-playground/env.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L4"},"def":{"name":"new","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"}}],"instance_methods":[{"html_id":"content-instance-method","name":"content","abstract":true,"location":{"filename":"src/topos-playground/env.cr","line_number":9,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L9"},"def":{"name":"content","visibility":"Public","body":""}},{"html_id":"env(env=ENV.dup)-instance-method","name":"env","abstract":false,"args":[{"name":"env","default_value":"ENV.dup","external_name":"env","restriction":""}],"args_string":"(env = ENV.dup)","args_html":"(env = <span class=\"t\">ENV</span>.dup)","location":{"filename":"src/topos-playground/env.cr","line_number":12,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L12"},"def":{"name":"env","args":[{"name":"env","default_value":"ENV.dup","external_name":"env","restriction":""}],"visibility":"Public","body":"merge_env({} of String => String, env)"}},{"html_id":"initialize-instance-method","name":"initialize","abstract":false,"location":{"filename":"src/topos-playground/env.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L4"},"def":{"name":"initialize","visibility":"Public","body":""}},{"html_id":"merge_env(data,env)-instance-method","name":"merge_env","abstract":false,"args":[{"name":"data","external_name":"data","restriction":""},{"name":"env","external_name":"env","restriction":""}],"args_string":"(data, env)","args_html":"(data, env)","location":{"filename":"src/topos-playground/env.cr","line_number":16,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L16"},"def":{"name":"merge_env","args":[{"name":"data","external_name":"data","restriction":""},{"name":"env","external_name":"env","restriction":""}],"visibility":"Public","body":"env.each do |key, value|\n  env[key] = value\nend\nenv.to_h\n"}},{"html_id":"path-instance-method","name":"path","abstract":true,"location":{"filename":"src/topos-playground/env.cr","line_number":10,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env.cr#L10"},"def":{"name":"path","visibility":"Public","body":""}}],"types":[{"html_id":"topos-playground.cr/ToposPlayground/Env/DappBackend","path":"ToposPlayground/Env/DappBackend.html","kind":"struct","full_name":"ToposPlayground::Env::DappBackend","name":"DappBackend","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env/dapp-backend.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-backend.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"instance_methods":[{"html_id":"content-instance-method","name":"content","abstract":false,"location":{"filename":"src/topos-playground/env/dapp-backend.cr","line_number":9,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-backend.cr#L9"},"def":{"name":"content","visibility":"Public","body":"\"PORT=3001\\nAUTH0_AUDIENCE=https://executor.demo.toposware.com\\nAUTH0_ISSUER_URL=https://dev-z8x4rhzfosi03fqx.us.auth0.com\\n\\n\""}},{"html_id":"path-instance-method","name":"path","abstract":false,"location":{"filename":"src/topos-playground/env/dapp-backend.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-backend.cr#L5"},"def":{"name":"path","visibility":"Public","body":"\"WORKINGDIR/dapp-frontend-erc20-messaging/packages/backend/.env\""}}]},{"html_id":"topos-playground.cr/ToposPlayground/Env/DappFrontend","path":"ToposPlayground/Env/DappFrontend.html","kind":"struct","full_name":"ToposPlayground::Env::DappFrontend","name":"DappFrontend","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env/dapp-frontend.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-frontend.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"instance_methods":[{"html_id":"content-instance-method","name":"content","abstract":false,"location":{"filename":"src/topos-playground/env/dapp-frontend.cr","line_number":9,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-frontend.cr#L9"},"def":{"name":"content","visibility":"Public","body":"\"VITE_EXECUTOR_SERVICE_ENDPOINT=http://localhost:3000\\nVITE_TOPOS_SUBNET_ENDPOINT=localhost:10002\\nVITE_ELASTIC_APM_ENDPOINT=http://example.com\\n# VITE_TRACING_OTEL_COLLECTOR_ENDPOINT=https://otel-collector.telemetry.devnet-1.topos.technology/v1/traces\\nVITE_TRACING_SERVICE_NAME=dapp-frontend-erc20-messaging\\nVITE_TRACING_SERVICE_VERSION=topos-playground\\n#VITE_TRACING_SERVICE_VERSION=0.1.0\\n\\n# Addresses\\nVITE_TOPOS_CORE_PROXY_CONTRACT_ADDRESS=$TOPOS_CORE_PROXY_CONTRACT_ADDRESS\\nVITE_ERC20_MESSAGING_CONTRACT_ADDRESS=$ERC20_MESSAGING_CONTRACT_ADDRESS\\nVITE_SUBNET_REGISTRATOR_CONTRACT_ADDRESS=$SUBNET_REGISTRATOR_CONTRACT_ADDRESS\\n\\n\".gsub(/\\$(\\w+)/) do |var|\n  ENV[var]?.to_s\nend"}},{"html_id":"path-instance-method","name":"path","abstract":false,"location":{"filename":"src/topos-playground/env/dapp-frontend.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/dapp-frontend.cr#L5"},"def":{"name":"path","visibility":"Public","body":"\"WORKINGDIR/dapp-frontend-erc20-messaging/packages/frontend/.env\""}}]},{"html_id":"topos-playground.cr/ToposPlayground/Env/ExecutorService","path":"ToposPlayground/Env/ExecutorService.html","kind":"struct","full_name":"ToposPlayground::Env::ExecutorService","name":"ExecutorService","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env/executor-service.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/executor-service.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"instance_methods":[{"html_id":"content-instance-method","name":"content","abstract":false,"location":{"filename":"src/topos-playground/env/executor-service.cr","line_number":9,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/executor-service.cr#L9"},"def":{"name":"content","visibility":"Public","body":"\"AUTH0_AUDIENCE=https://executor.demo.toposware.com\\nAUTH0_ISSUER_URL=https://dev-z8x4rhzfosi03fqx.us.auth0.com/\\nREDIS_HOST=localhost\\nREDIS_PORT=6379\\nTOPOS_SUBNET_ENDPOINT=localhost:10002\\n\\n\""}},{"html_id":"path-instance-method","name":"path","abstract":false,"location":{"filename":"src/topos-playground/env/executor-service.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/executor-service.cr#L5"},"def":{"name":"path","visibility":"Public","body":"\"WORKINGDIR/executor-service/.env\""}}]},{"html_id":"topos-playground.cr/ToposPlayground/Env/Secrets","path":"ToposPlayground/Env/Secrets.html","kind":"struct","full_name":"ToposPlayground::Env::Secrets","name":"Secrets","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env/secrets.cr","line_number":4,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/secrets.cr#L4"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"KeyHash","name":"KeyHash","value":"{\"PRIVATE_KEY\" => \"0xd7e2e00b43c12cf17239d4755ed744df6ca70a933fc7c8bbb7da1342a5ff2e38\", \"TOKEN_DEPLOYER_SALT\" => \"m1Ln9uF9MGZ2PcR\", \"TOPOS_CORE_SALT\" => \"dCyN8VZz5sXgqMO\", \"TOPOS_CORE_PROXY_SALT\" => \"aRV8Mp9o4xRpLbF\", \"ERC20_MESSAGING_SALT\" => \"ho37cJbGkgI6vnp\", \"SUBNET_REGISTRATOR_SALT\" => \"azsRlXyGu0ty291\", \"AUTH0_CLIENT_ID\" => \"xVF6EuPDaazQchfjFpGAdcJUpHk2W5I2\", \"AUTH0_CLIENT_SECRET\" => \"-CrwnrgSx1EaP_oaKAFXFdqrIvA4WK8Pcpd5xC4o3ZfYB4H4V4FPHfEbqpu4KZN8\"}"}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground/Env","kind":"struct","full_name":"ToposPlayground::Env","name":"Env"},"instance_methods":[{"html_id":"content-instance-method","name":"content","abstract":false,"location":{"filename":"src/topos-playground/env/secrets.cr","line_number":20,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/secrets.cr#L20"},"def":{"name":"content","visibility":"Public","body":"String.build do |str|\n  KeyHash.each do |key, value|\n    str << \"export #{key}=#{value}\\n\"\n  end\n  str << \"\\n\"\nend"}},{"html_id":"env(env=ENV.dup)-instance-method","name":"env","abstract":false,"args":[{"name":"env","default_value":"ENV.dup","external_name":"env","restriction":""}],"args_string":"(env = ENV.dup)","args_html":"(env = <span class=\"t\">ENV</span>.dup)","location":{"filename":"src/topos-playground/env/secrets.cr","line_number":29,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/secrets.cr#L29"},"def":{"name":"env","args":[{"name":"env","default_value":"ENV.dup","external_name":"env","restriction":""}],"visibility":"Public","body":"merge_env(KeyHash, env)"}},{"html_id":"path-instance-method","name":"path","abstract":false,"location":{"filename":"src/topos-playground/env/secrets.cr","line_number":16,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env/secrets.cr#L16"},"def":{"name":"path","visibility":"Public","body":"\"WORKINGDIR/.env.secrets\""}}]}]},{"html_id":"topos-playground.cr/ToposPlayground/EnvRegistry","path":"ToposPlayground/EnvRegistry.html","kind":"class","full_name":"ToposPlayground::EnvRegistry","name":"EnvRegistry","abstract":false,"superclass":{"html_id":"topos-playground.cr/ToposPlayground/Registry","kind":"class","full_name":"ToposPlayground::Registry","name":"Registry"},"ancestors":[{"html_id":"topos-playground.cr/ToposPlayground/Registry","kind":"class","full_name":"ToposPlayground::Registry","name":"Registry"},{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/env_registry.cr","line_number":6,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/env_registry.cr#L6"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"doc":"A registry for all of the classes used to build executable environments.\nAny class that subclasses `Env` will be automatically registered.","summary":"<p>A registry for all of the classes used to build executable environments.</p>"},{"html_id":"topos-playground.cr/ToposPlayground/Error","path":"ToposPlayground/Error.html","kind":"alias","full_name":"ToposPlayground::Error","name":"Error","abstract":false,"locations":[{"filename":"src/topos-playground.cr","line_number":23,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground.cr#L23"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":true,"aliased":"ToposPlayground::ErrorLog","aliased_html":"<a href=\"../ToposPlayground/ErrorLog.html\">ToposPlayground::ErrorLog</a>","const":false,"constants":[{"id":"ErrSentinel","name":"ErrSentinel","value":"\"\""}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"}},{"html_id":"topos-playground.cr/ToposPlayground/ErrorLog","path":"ToposPlayground/ErrorLog.html","kind":"class","full_name":"ToposPlayground::ErrorLog","name":"ErrorLog","abstract":false,"superclass":{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/error_log.cr","line_number":2,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L2"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"ErrSentinel","name":"ErrSentinel","value":"\"\""}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"class_methods":[{"html_id":"debug(&block:->String)-class-method","name":"debug","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":10,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L10"},"def":{"name":"debug","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).debug do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"error(&block:->String)-class-method","name":"error","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":35,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L35"},"def":{"name":"error","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).error do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"fatal(&block:->String)-class-method","name":"fatal","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":40,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L40"},"def":{"name":"fatal","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).fatal do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"info(&block:->String)-class-method","name":"info","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":20,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L20"},"def":{"name":"info","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).info do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"notice(&block:->String)-class-method","name":"notice","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":25,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L25"},"def":{"name":"notice","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).notice do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"trace(&block:->String)-class-method","name":"trace","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L5"},"def":{"name":"trace","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).trace do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}},{"html_id":"warn(&block:->String)-class-method","name":"warn","abstract":false,"location":{"filename":"src/topos-playground/error_log.cr","line_number":30,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/error_log.cr#L30"},"def":{"name":"warn","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(-> String)"},"visibility":"Public","body":"msg = block.call\n(::Log.for(\"error\")).warn do\n  \"#{ErrSentinel}#{msg}\"\nend\n"}}]},{"html_id":"topos-playground.cr/ToposPlayground/Registry","path":"ToposPlayground/Registry.html","kind":"class","full_name":"ToposPlayground::Registry","name":"Registry","abstract":false,"superclass":{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"topos-playground.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/registry.cr","line_number":2,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L2"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"topos-playground.cr/ToposPlayground/CommandRegistry","kind":"class","full_name":"ToposPlayground::CommandRegistry","name":"CommandRegistry"},{"html_id":"topos-playground.cr/ToposPlayground/EnvRegistry","kind":"class","full_name":"ToposPlayground::EnvRegistry","name":"EnvRegistry"}],"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"class_methods":[{"html_id":"[](key)-class-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/topos-playground/registry.cr","line_number":25,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L25"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"@@name_to_class_map[key]"}},{"html_id":"[]=(name,klass)-class-method","name":"[]=","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"args_string":"(name, klass)","args_html":"(name, klass)","location":{"filename":"src/topos-playground/registry.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L5"},"def":{"name":"[]=","args":[{"name":"name","external_name":"name","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"visibility":"Public","body":"@@lock.synchronize do\n  @@name_to_class_map[name] = klass\nend"}},{"html_id":"[]?(key)-class-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/topos-playground/registry.cr","line_number":29,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L29"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"@@name_to_class_map[key]?"}},{"html_id":"classes-class-method","name":"classes","abstract":false,"location":{"filename":"src/topos-playground/registry.cr","line_number":41,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L41"},"def":{"name":"classes","visibility":"Public","body":"@@name_to_class_map.values"}},{"html_id":"get(key)-class-method","name":"get","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/topos-playground/registry.cr","line_number":33,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L33"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"self[key]"}},{"html_id":"names-class-method","name":"names","abstract":false,"location":{"filename":"src/topos-playground/registry.cr","line_number":37,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L37"},"def":{"name":"names","visibility":"Public","body":"@@name_to_class_map.keys"}},{"html_id":"register(klass)-class-method","name":"register","abstract":false,"args":[{"name":"klass","external_name":"klass","restriction":""}],"args_string":"(klass)","args_html":"(klass)","location":{"filename":"src/topos-playground/registry.cr","line_number":15,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L15"},"def":{"name":"register","args":[{"name":"klass","external_name":"klass","restriction":""}],"visibility":"Public","body":"@@lock.synchronize do\n  @@name_to_class_map[(klass.name.split(/::/)).last.to_s.downcase] = klass\nend"}},{"html_id":"registry-class-method","name":"registry","abstract":false,"location":{"filename":"src/topos-playground/registry.cr","line_number":21,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L21"},"def":{"name":"registry","visibility":"Public","body":"@@name_to_class_map"}},{"html_id":"set(name,klass)-class-method","name":"set","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"args_string":"(name, klass)","args_html":"(name, klass)","location":{"filename":"src/topos-playground/registry.cr","line_number":11,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/registry.cr#L11"},"def":{"name":"set","args":[{"name":"name","external_name":"name","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"visibility":"Public","body":"self[name] = klass"}}]},{"html_id":"topos-playground.cr/ToposPlayground/StderrConsoleFormat","path":"ToposPlayground/StderrConsoleFormat.html","kind":"struct","full_name":"ToposPlayground::StderrConsoleFormat","name":"StderrConsoleFormat","abstract":false,"superclass":{"html_id":"topos-playground.cr/Log/StaticFormatter","kind":"struct","full_name":"Log::StaticFormatter","name":"StaticFormatter"},"ancestors":[{"html_id":"topos-playground.cr/Log/StaticFormatter","kind":"struct","full_name":"Log::StaticFormatter","name":"StaticFormatter"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/console_format.cr","line_number":5,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/console_format.cr#L5"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"instance_methods":[{"html_id":"run-instance-method","name":"run","doc":"Subclasses must implement this method to define the output pattern","summary":"<p>Subclasses must implement this method to define the output pattern</p>","abstract":false,"location":{"filename":"src/topos-playground/console_format.cr","line_number":6,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/console_format.cr#L6"},"def":{"name":"run","visibility":"Public","body":"string(ToposPlayground.break_text(String.build do |str|\n  str << \"‚ùó\"\n  str << (\"#{@entry.severity.label.rjust(6)}: #{@entry.message}\".colorize(:green)).to_s\nend, ToposPlayground.terminal_width))"}}]},{"html_id":"topos-playground.cr/ToposPlayground/StdoutConsoleFormat","path":"ToposPlayground/StdoutConsoleFormat.html","kind":"struct","full_name":"ToposPlayground::StdoutConsoleFormat","name":"StdoutConsoleFormat","abstract":false,"superclass":{"html_id":"topos-playground.cr/Log/StaticFormatter","kind":"struct","full_name":"Log::StaticFormatter","name":"StaticFormatter"},"ancestors":[{"html_id":"topos-playground.cr/Log/StaticFormatter","kind":"struct","full_name":"Log::StaticFormatter","name":"StaticFormatter"},{"html_id":"topos-playground.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"topos-playground.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"topos-playground.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/topos-playground/console_format.cr","line_number":17,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/console_format.cr#L17"}],"repository_name":"topos-playground.cr","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"topos-playground.cr/ToposPlayground","kind":"class","full_name":"ToposPlayground","name":"ToposPlayground"},"instance_methods":[{"html_id":"run-instance-method","name":"run","doc":"Subclasses must implement this method to define the output pattern","summary":"<p>Subclasses must implement this method to define the output pattern</p>","abstract":false,"location":{"filename":"src/topos-playground/console_format.cr","line_number":18,"url":"https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/console_format.cr#L18"},"def":{"name":"run","visibility":"Public","body":"string(((ToposPlayground.break_text(@entry.message, ToposPlayground.terminal_width)).colorize(:green)).to_s)"}}]}]}]}}
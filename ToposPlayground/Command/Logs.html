<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.9.2">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="topos-playground.cr">



<link href="../../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../js/doc.js"></script>

  <meta name="repository-name" content="topos-playground.cr">
  <title>ToposPlayground::Command::Logs - topos-playground.cr main</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../../";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../../index.html">
          topos-playground.cr
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="topos-playground.cr/OptionParser" data-name="optionparser">
      <a href="../../OptionParser.html">OptionParser</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/SemanticVersion" data-name="semanticversion">
      <a href="../../SemanticVersion.html">SemanticVersion</a>
      
    </li>
  
  <li class="parent open current" data-id="topos-playground.cr/ToposPlayground" data-name="toposplayground">
      <a href="../../ToposPlayground.html">ToposPlayground</a>
      
        <ul>
  
  <li class="parent open current" data-id="topos-playground.cr/ToposPlayground/Command" data-name="toposplayground::command">
      <a href="../../ToposPlayground/Command.html">Command</a>
      
        <ul>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Command/Clean" data-name="toposplayground::command::clean">
      <a href="../../ToposPlayground/Command/Clean.html">Clean</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Command/Error" data-name="toposplayground::command::error">
      <a href="../../ToposPlayground/Command/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Command/Log" data-name="toposplayground::command::log">
      <a href="../../ToposPlayground/Command/Log.html">Log</a>
      
    </li>
  
  <li class=" current" data-id="topos-playground.cr/ToposPlayground/Command/Logs" data-name="toposplayground::command::logs">
      <a href="../../ToposPlayground/Command/Logs.html">Logs</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Command/Start" data-name="toposplayground::command::start">
      <a href="../../ToposPlayground/Command/Start.html">Start</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Command/Version" data-name="toposplayground::command::version">
      <a href="../../ToposPlayground/Command/Version.html">Version</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/CommandRegistry" data-name="toposplayground::commandregistry">
      <a href="../../ToposPlayground/CommandRegistry.html">CommandRegistry</a>
      
    </li>
  
  <li class="parent " data-id="topos-playground.cr/ToposPlayground/Env" data-name="toposplayground::env">
      <a href="../../ToposPlayground/Env.html">Env</a>
      
        <ul>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Env/DappBackend" data-name="toposplayground::env::dappbackend">
      <a href="../../ToposPlayground/Env/DappBackend.html">DappBackend</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Env/DappFrontend" data-name="toposplayground::env::dappfrontend">
      <a href="../../ToposPlayground/Env/DappFrontend.html">DappFrontend</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Env/ExecutorService" data-name="toposplayground::env::executorservice">
      <a href="../../ToposPlayground/Env/ExecutorService.html">ExecutorService</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Env/Secrets" data-name="toposplayground::env::secrets">
      <a href="../../ToposPlayground/Env/Secrets.html">Secrets</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/EnvRegistry" data-name="toposplayground::envregistry">
      <a href="../../ToposPlayground/EnvRegistry.html">EnvRegistry</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Error" data-name="toposplayground::error">
      <a href="../../ToposPlayground/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/ErrorLog" data-name="toposplayground::errorlog">
      <a href="../../ToposPlayground/ErrorLog.html">ErrorLog</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/Registry" data-name="toposplayground::registry">
      <a href="../../ToposPlayground/Registry.html">Registry</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/StderrConsoleFormat" data-name="toposplayground::stderrconsoleformat">
      <a href="../../ToposPlayground/StderrConsoleFormat.html">StderrConsoleFormat</a>
      
    </li>
  
  <li class=" " data-id="topos-playground.cr/ToposPlayground/StdoutConsoleFormat" data-name="toposplayground::stdoutconsoleformat">
      <a href="../../ToposPlayground/StdoutConsoleFormat.html">StdoutConsoleFormat</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> ToposPlayground::<wbr>Command::<wbr>Logs

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../../ToposPlayground/Command/Logs.html">ToposPlayground::Command::Logs</a></li><li class="superclass"><a href="../../ToposPlayground/Command.html">ToposPlayground::Command</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>

















  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L4" target="_blank">
        topos-playground/command/log.cr
      </a>
    
    <br/>
  



  
    <h2>
      <a id="constant-summary" class="anchor" href="#constant-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
      Constant Summary
    </h2>
  
  <dl>
    
      <dt class="entry-const" id="UUID_REGEXP">
        <strong>UUID_REGEXP</strong> = <code><span class="s">/([0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12})/</span></code>
      </dt>
      
    
  </dl>





  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#levenshtein_options-class-method" class="signature"><strong>.levenshtein_options</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#list_options%28parser%2Cconfig%29-class-method" class="signature"><strong>.list_options</strong>(parser, config)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#log_to_file%3F%28config%29-class-method" class="signature"><strong>.log_to_file?</strong>(config)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#options%28parser%2Cconfig%29-class-method" class="signature"><strong>.options</strong>(parser, config)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#prune_options%28parser%2Cconfig%29-class-method" class="signature"><strong>.prune_options</strong>(parser, config)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#view_options%28parser%2Cconfig%29-class-method" class="signature"><strong>.view_options</strong>(parser, config)</a>
        
      </li>
    
  </ul>



  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#calculate_gaps_and_standard_deviation%28logs%29-instance-method" class="signature"><strong>#calculate_gaps_and_standard_deviation</strong>(logs)</a>
        
          <div class="summary"><p>Given a sorted array of logs, calculate the standard deviation of the gaps in time between each of the logs.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_list-instance-method" class="signature"><strong>#do_list</strong></a>
        
          <div class="summary"><p>Execute the logic of the <code>list</code> command.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_prune-instance-method" class="signature"><strong>#do_prune</strong></a>
        
          <div class="summary"><p>Using the sorting heuristic for <code><a href="../../ToposPlayground/Command/Logs.html#do_list-instance-method">#do_list</a></code> to sort files, allow pruning of log files by age, size, or range.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_prune_days%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_prune_days</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Delete log files older than the specified number of days.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_prune_range%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_prune_range</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Delete log files within the specified range.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_prune_size%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_prune_size</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Delete log files smaller than the specified size.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_view-instance-method" class="signature"><strong>#do_view</strong></a>
        
          <div class="summary"><p>Using the sorting heuristic for <code><a href="../../ToposPlayground/Command/Logs.html#do_list-instance-method">#do_list</a></code> to sort files, allow viewing of an individual log file, selected by index, or by date/time -- the first file before or after a given date/time.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_view_after%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_view_after</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Find the log file specified by the selector, which is a date/time, and display it.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_view_before%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_view_before</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Find the log file specified by the selector, which is a date/time, and display it.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#do_view_index%28sorted_logs%2Cselector%29-instance-method" class="signature"><strong>#do_view_index</strong>(sorted_logs, selector)</a>
        
          <div class="summary"><p>Find the log file specified by the selector, which is an index into the sorted list of log files, most recent first, and display it.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#generate_base_list%3AArray%28Tuple%28String%2CString%2CTime%29%29-instance-method" class="signature"><strong>#generate_base_list</strong> : Array(Tuple(String, String, Time))</a>
        
          <div class="summary"><p>Perform the first pass at creating a list of log files.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#handle_erroneously_old_logs%28logs%29%3AArray%28Tuple%28String%2CString%2CTime%29%29-instance-method" class="signature"><strong>#handle_erroneously_old_logs</strong>(logs) : Array(Tuple(String, String, Time))</a>
        
          <div class="summary"><p>If there are any log files with a filename that reflects a timestamp later than the current time, then it must be a randomly generated UUID from the official Node.js version of the topos-playground; pull the timestamp from the last modification time.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#handle_erroneously_young_logs%28logs%2Cgaps%2Cstandard_deviation%29-instance-method" class="signature"><strong>#handle_erroneously_young_logs</strong>(logs, gaps, standard_deviation)</a>
        
          <div class="summary"><p>With a modest statistical probability of being wrong, this should be able to identify those logs which have accidentally created valid UUID timestamps that are too early in time to have been generated by this version of the playground.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#multi_line_header%28logs%29-instance-method" class="signature"><strong>#multi_line_header</strong>(logs)</a>
        
          <div class="summary"><p>Build the multi-line header.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#parse_to_size%28selector%29-instance-method" class="signature"><strong>#parse_to_size</strong>(selector)</a>
        
          <div class="summary"><p>Parse a size selector, which can be a number, or a number followed by a unit, into a byte count.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#print_header%28logs%29-instance-method" class="signature"><strong>#print_header</strong>(logs)</a>
        
          <div class="summary"><p>print the header for the sorted list of logs</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#print_logs%28logs%29-instance-method" class="signature"><strong>#print_logs</strong>(logs)</a>
        
          <div class="summary"><p>Print the sorted list of logs.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#run-instance-method" class="signature"><strong>#run</strong></a>
        
          <div class="summary"><p>Act on the log subcommand (<code>list</code>, <code>view</code>, or <code>prune</code>).</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#show_deletion_count%28count%29-instance-method" class="signature"><strong>#show_deletion_count</strong>(count)</a>
        
          <div class="summary"><p>Output the number of deleted files.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#show_log_file%28log%29-instance-method" class="signature"><strong>#show_log_file</strong>(log)</a>
        
          <div class="summary"><p>Display the given log file.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#single_line_header%28logs%29-instance-method" class="signature"><strong>#single_line_header</strong>(logs)</a>
        
          <div class="summary"><p>Build the single-line header.</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from class <code><a href="../../ToposPlayground/Command.html">ToposPlayground::Command</a></code></h3>
  
  
    <a href="../../ToposPlayground/Command.html#config%3AConfig-instance-method" class="tooltip">
      <span>config : Config</span>
    config</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#config%3D%28config%3AConfig%29-instance-method" class="tooltip">
      <span>config=(config : Config)</span>
    config=</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#run-instance-method" class="tooltip">
      <span>run</span>
    run</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#run_process%28command%2Cchdir%3D%22.%22%2Cenv%3AProcess%3A%3AEnv%3Dnil%2Cshell%3ABool%3Dtrue%29-instance-method" class="tooltip">
      <span>run_process(command, chdir = <span class="s">&quot;.&quot;</span>, env : Process::Env = <span class="n">nil</span>, shell : Bool = <span class="n">true</span>)<br/>run_process(command, chdir = <span class="s">&quot;.&quot;</span>, background : Bool = <span class="n">false</span>, env : Process::Env = <span class="n">nil</span>)</span>
    run_process</a>
    
  


    

  <h3>Constructor methods inherited from class <code><a href="../../ToposPlayground/Command.html">ToposPlayground::Command</a></code></h3>
  
  
    <a href="../../ToposPlayground/Command.html#new%28config%3AConfig%29-class-method" class="tooltip">
      <span>new(config : Config)</span>
    new</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../../ToposPlayground/Command.html">ToposPlayground::Command</a></code></h3>
  
  
    <a href="../../ToposPlayground/Command.html#config%3AConfig-class-method" class="tooltip">
      <span>config : Config</span>
    config</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#config%3D%28config%3AConfig%29-class-method" class="tooltip">
      <span>config=(config : Config)</span>
    config=</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#levenshtein_options-class-method" class="tooltip">
      <span>levenshtein_options</span>
    levenshtein_options</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#log_to_file%3F%28config%29-class-method" class="tooltip">
      <span>log_to_file?(config)</span>
    log_to_file?</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#options%28parser%2Cconfig%29-class-method" class="tooltip">
      <span>options(parser, config)</span>
    options</a>, 
    
  
    <a href="../../ToposPlayground/Command.html#run_process%28command%2Cchdir%3D%22.%22%2Cbackground%3ABool%3Dfalse%2Cenv%3AProcess%3A%3AEnv%3Dnil%29-class-method" class="tooltip">
      <span>run_process(command, chdir = <span class="s">&quot;.&quot;</span>, background : Bool = <span class="n">false</span>, env : Process::Env = <span class="n">nil</span>)<br/>run_process(command, chdir = <span class="s">&quot;.&quot;</span>, env : Process::Env = <span class="n">nil</span>, shell : Bool = <span class="n">true</span>)</span>
    run_process</a>
    
  


  
    


    


    


  
    


    


    


  
</div>




  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="levenshtein_options-class-method">
      <div class="signature">
        
        def self.<strong>levenshtein_options</strong>

        <a class="method-permalink" href="#levenshtein_options-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L18" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="list_options(parser,config)-class-method">
      <div class="signature">
        
        def self.<strong>list_options</strong>(parser, config)

        <a class="method-permalink" href="#list_options%28parser%2Cconfig%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L38" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="log_to_file?(config)-class-method">
      <div class="signature">
        
        def self.<strong>log_to_file?</strong>(config)

        <a class="method-permalink" href="#log_to_file%3F%28config%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L110" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="options(parser,config)-class-method">
      <div class="signature">
        
        def self.<strong>options</strong>(parser, config)

        <a class="method-permalink" href="#options%28parser%2Cconfig%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L7" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="prune_options(parser,config)-class-method">
      <div class="signature">
        
        def self.<strong>prune_options</strong>(parser, config)

        <a class="method-permalink" href="#prune_options%28parser%2Cconfig%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L62" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="view_options(parser,config)-class-method">
      <div class="signature">
        
        def self.<strong>view_options</strong>(parser, config)

        <a class="method-permalink" href="#view_options%28parser%2Cconfig%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L44" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="calculate_gaps_and_standard_deviation(logs)-instance-method">
      <div class="signature">
        
        def <strong>calculate_gaps_and_standard_deviation</strong>(logs)

        <a class="method-permalink" href="#calculate_gaps_and_standard_deviation%28logs%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Given a sorted array of logs, calculate the standard deviation of the gaps in time
between each of the logs.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L417" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_list-instance-method">
      <div class="signature">
        
        def <strong>do_list</strong>

        <a class="method-permalink" href="#do_list-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Execute the logic of the <code>list</code> command. Logs are sorted by the timestamp embedded
into the UUID in the filename. If the UUID doesn't encode a valid timestamp, then
the file modification time is used. If it does encode a valid timestamp, but the
timestamp is for a time later than now, the file modification time is used. Likewise,
if there is a gap between the timestamp of one log file and the next that is greater
than twice the standard deviation of the gaps between all of the log file, the timestamp
will be taken from the file modification time.</p>
<p>This heuristic lets the log files generated by this version of the playground, which
are part of the UUID in the filename, to take precedence when sorting the files, but
it allows the playground binary to also function in a reasonable and predictable way
with log files generated by the official Node.js version.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L138" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_prune-instance-method">
      <div class="signature">
        
        def <strong>do_prune</strong>

        <a class="method-permalink" href="#do_prune-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Using the sorting heuristic for <code><a href="../../ToposPlayground/Command/Logs.html#do_list-instance-method">#do_list</a></code> to sort files, allow pruning of log files
by age, size, or range. The age is calculated in the same way as with the <code><a href="../../ToposPlayground/Command/Logs.html#do_list-instance-method">#do_list</a></code>
method. Ranges are indexed with 1 being the most recent file.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L207" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_prune_days(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_prune_days</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_prune_days%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Delete log files older than the specified number of days.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L230" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_prune_range(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_prune_range</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_prune_range%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Delete log files within the specified range. Ranges are indexed with 1 being the
most recent file. Alternatively, delete specific log files, by index, either alone,
or in a comma separated list.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L298" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_prune_size(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_prune_size</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_prune_size%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Delete log files smaller than the specified size. This is useful for getting rid
of log files that are empty, or that contain only a few lines of output.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L252" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_view-instance-method">
      <div class="signature">
        
        def <strong>do_view</strong>

        <a class="method-permalink" href="#do_view-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Using the sorting heuristic for <code><a href="../../ToposPlayground/Command/Logs.html#do_list-instance-method">#do_list</a></code> to sort files, allow viewing of an individual
log file, selected by index, or by date/time -- the first file before or after a given
date/time.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L150" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_view_after(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_view_after</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_view_after%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find the log file specified by the selector, which is a date/time, and display it.
This will show the first log file with a timestamp later than the selector.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L194" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_view_before(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_view_before</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_view_before%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find the log file specified by the selector, which is a date/time, and display it.
This will show the first log file with a timestamp earlier than the selector.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L182" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="do_view_index(sorted_logs,selector)-instance-method">
      <div class="signature">
        
        def <strong>do_view_index</strong>(sorted_logs, selector)

        <a class="method-permalink" href="#do_view_index%28sorted_logs%2Cselector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find the log file specified by the selector, which is an index into the sorted list
of log files, most recent first, and display it. If the selector is emtpy, show the
most recent log file.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L173" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="generate_base_list:Array(Tuple(String,String,Time))-instance-method">
      <div class="signature">
        
        def <strong>generate_base_list</strong> : Array(Tuple(String, String, Time))

        <a class="method-permalink" href="#generate_base_list%3AArray%28Tuple%28String%2CString%2CTime%29%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Perform the first pass at creating a list of log files.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L386" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="handle_erroneously_old_logs(logs):Array(Tuple(String,String,Time))-instance-method">
      <div class="signature">
        
        def <strong>handle_erroneously_old_logs</strong>(logs) : Array(Tuple(String, String, Time))

        <a class="method-permalink" href="#handle_erroneously_old_logs%28logs%29%3AArray%28Tuple%28String%2CString%2CTime%29%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>If there are any log files with a filename that reflects a timestamp later than
the current time, then it must be a randomly generated UUID from the official
Node.js version of the topos-playground; pull the timestamp from the last
modification time.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L403" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="handle_erroneously_young_logs(logs,gaps,standard_deviation)-instance-method">
      <div class="signature">
        
        def <strong>handle_erroneously_young_logs</strong>(logs, gaps, standard_deviation)

        <a class="method-permalink" href="#handle_erroneously_young_logs%28logs%2Cgaps%2Cstandard_deviation%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>With a modest statistical probability of being wrong, this should be able to identify
those logs which have accidentally created valid UUID timestamps that are too early
in time to have been generated by this version of the playground. If the gap between
them is greater than three times the standard deviation, it will use the file modification
time instead of the timestamp.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L443" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="multi_line_header(logs)-instance-method">
      <div class="signature">
        
        def <strong>multi_line_header</strong>(logs)

        <a class="method-permalink" href="#multi_line_header%28logs%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Build the multi-line header.</p>
<pre><code class="language-crystal"> <span class="c">#                                             Log File Path</span>
                  <span class="t">File</span> <span class="t">Date</span>                <span class="t">File</span> <span class="t">Size</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L516" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="parse_to_size(selector)-instance-method">
      <div class="signature">
        
        def <strong>parse_to_size</strong>(selector)

        <a class="method-permalink" href="#parse_to_size%28selector%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Parse a size selector, which can be a number, or a number followed by a unit,
into a byte count. For example, <code>128b</code> or <code>10k or</code>1m<code>or</code>4g`.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L272" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="print_header(logs)-instance-method">
      <div class="signature">
        
        def <strong>print_header</strong>(logs)

        <a class="method-permalink" href="#print_header%28logs%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>print the header for the sorted list of logs</p>
<p>There are two formats for the header, depending on whether the logs will be printed in single
line format or multi-line format.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L479" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="print_logs(logs)-instance-method">
      <div class="signature">
        
        def <strong>print_logs</strong>(logs)

        <a class="method-permalink" href="#print_logs%28logs%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Print the sorted list of logs.</p>
<p>This is comprised of a header, and then a line for each log file. If the single-line format
is too wide for the terminal, the multi-line format will be used. Regarding, though, line
wrapping is still applied, so that everything stays relatively formatted, even on small
terminal windows.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L459" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="run-instance-method">
      <div class="signature">
        
        def <strong>run</strong>

        <a class="method-permalink" href="#run-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Act on the log subcommand (<code>list</code>, <code>view</code>, or <code>prune</code>).</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L115" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="show_deletion_count(count)-instance-method">
      <div class="signature">
        
        def <strong>show_deletion_count</strong>(count)

        <a class="method-permalink" href="#show_deletion_count%28count%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Output the number of deleted files.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L370" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="show_log_file(log)-instance-method">
      <div class="signature">
        
        def <strong>show_log_file</strong>(log)

        <a class="method-permalink" href="#show_log_file%28log%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Display the given log file.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L375" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="single_line_header(logs)-instance-method">
      <div class="signature">
        
        def <strong>single_line_header</strong>(logs)

        <a class="method-permalink" href="#single_line_header%28logs%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Build the single-line header.</p>
<pre><code class="language-crystal"><span class="c">#                                             Log File Path                                                             File Date                File Size</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/wyhaines/topos-playground.cr/blob/80c139cc0605bb0daf7b328f83ece3258d5cf57e/src/topos-playground/command/log.cr#L498" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
